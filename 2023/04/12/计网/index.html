<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>计网学习 | Cj的blog</title><meta name="author" content="Cj"><meta name="copyright" content="Cj"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="计网学习第一章 计算机网络和因特网 目标：了解基本属于和概念、掌握网络的基本原理  1.1什么是Internet？网络：节点和边的关系 计算机网络：联网的计算机系统。包括主机节点（电脑、手机等）是数据的源和目标，数据交换节点（路由器、交换机等）数据中转的节点，链路（连接节点）：接入链路（主机连到互联网），主干链路（路由器间的链路） 互联网：从构成的角度看：包括了节点和边。是以TCP、IP协议为主支">
<meta property="og:type" content="article">
<meta property="og:title" content="计网学习">
<meta property="og:url" content="http://example.com/2023/04/12/%E8%AE%A1%E7%BD%91/index.html">
<meta property="og:site_name" content="Cj的blog">
<meta property="og:description" content="计网学习第一章 计算机网络和因特网 目标：了解基本属于和概念、掌握网络的基本原理  1.1什么是Internet？网络：节点和边的关系 计算机网络：联网的计算机系统。包括主机节点（电脑、手机等）是数据的源和目标，数据交换节点（路由器、交换机等）数据中转的节点，链路（连接节点）：接入链路（主机连到互联网），主干链路（路由器间的链路） 互联网：从构成的角度看：包括了节点和边。是以TCP、IP协议为主支">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/img/default_cover_4.webp">
<meta property="article:published_time" content="2023-04-12T06:23:43.520Z">
<meta property="article:modified_time" content="2023-06-22T12:39:13.148Z">
<meta property="article:author" content="Cj">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/img/default_cover_4.webp"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2023/04/12/%E8%AE%A1%E7%BD%91/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":230},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '计网学习',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-06-22 20:39:13'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/custom.css"><link rel="stylesheet" href="/css/progress_bar.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="/css/cat.css"><link rel="stylesheet" href="/css/custom.css" media="defer" onload="this.media='all'"><div id="myscoll"></div><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-double-row-display@1.00/cardlistpost.min.css"/>
<style>#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags:before {content:"\A";
  white-space: pre;}#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags > .article-meta__separator{display:none}</style>
<link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-categories-card@1.0.0/lib/categorybar.css"><link rel="stylesheet" href="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/clock.min.css" /><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-footer-beautify@1.0.0/lib/runtime.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css" media="print" onload="this.media='all'"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.4.2"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>const preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',()=> { preloader.endLoading() })

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/touxiang.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">9</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 列表</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/default_cover_4.webp')"><nav id="nav"><span id="blog-info"><a href="/" title="Cj的blog"><span class="site-name">Cj的blog</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 列表</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">计网学习</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-04-12T06:23:43.520Z" title="发表于 2023-04-12 14:23:43">2023-04-12</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-06-22T12:39:13.148Z" title="更新于 2023-06-22 20:39:13">2023-06-22</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">13.3k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>40分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="计网学习"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="计网学习"><a href="#计网学习" class="headerlink" title="计网学习"></a>计网学习</h1><h2 id="第一章-计算机网络和因特网"><a href="#第一章-计算机网络和因特网" class="headerlink" title="第一章 计算机网络和因特网"></a>第一章 计算机网络和因特网</h2><blockquote>
<p>目标：了解基本属于和概念、掌握网络的基本原理</p>
</blockquote>
<h3 id="1-1什么是Internet？"><a href="#1-1什么是Internet？" class="headerlink" title="1.1什么是Internet？"></a>1.1什么是Internet？</h3><h5 id="网络："><a href="#网络：" class="headerlink" title="网络："></a>网络：</h5><p>节点和边的关系</p>
<h5 id="计算机网络："><a href="#计算机网络：" class="headerlink" title="计算机网络："></a>计算机网络：</h5><p>联网的计算机系统。<br>包括主机节点（电脑、手机等）是数据的源和目标，数据交换节点（路由器、交换机等）数据中转的节点，<br>链路（连接节点）：接入链路（主机连到互联网），主干链路（路由器间的链路）</p>
<h5 id="互联网："><a href="#互联网：" class="headerlink" title="互联网："></a>互联网：</h5><p>从构成的角度看：包括了节点和边。是以TCP、IP协议为主支撑的用的人最多的网络。互联网标准：RFC、IETF。<br>从服务的角度看：是分布式应用以及为分布式应用提供通讯的基础设施（方式为API）。  </p>
<h5 id="协议："><a href="#协议：" class="headerlink" title="协议："></a>协议：</h5><p>不同层有不同协议。传输层：TCP，UDP 网络层：IP，路由选择协议 链路层物理层：…..<br>规范了语法（发请求的格式服从http）、语义（按规范解释报文）、时序（收完之后发）、动作（收、发）。  </p>
<blockquote>
<p>协议的定义：<strong>对等层</strong>的实体在通信的过程中应该遵循的规则的集合</p>
</blockquote>
<blockquote>
<p>网络结构：网络边缘（主机，应用程序）、网络核心（互联着的路由器，交换机）、接入网物理媒体（有线，无线通信链路）</p>
</blockquote>
<h3 id="1-2网络边缘："><a href="#1-2网络边缘：" class="headerlink" title="1.2网络边缘："></a>1.2网络边缘：</h3><h5 id="应用进程间的通信模式："><a href="#应用进程间的通信模式：" class="headerlink" title="应用进程间的通信模式："></a>应用进程间的通信模式：</h5><p>1.CS模式（客户端服务器模式）web 问题：可扩展性差，超载荷时能力断崖式下降<br>2.P2P模式（对等模式）迅雷 每个节点既是客户端也是服务器</p>
<h5 id="基础设施为网络应用提供的服务："><a href="#基础设施为网络应用提供的服务：" class="headerlink" title="基础设施为网络应用提供的服务："></a>基础设施为网络应用提供的服务：</h5><p>1.面向连接服务  两个应用进程的通信开始前先建立连接（握手）为后面的通信做好准备 如TCP服务（可靠的：发送的和收到的一样，流量控制：控制接收速度和发送速度，拥塞控制：在堵塞时让发送速度降低）<br>2.无连接服务    不用握手 如UDP服务（不可靠，没有流量控制和拥塞控制，把主机到主机细分为进程到进程，实时）</p>
<h3 id="1-3网络核心："><a href="#1-3网络核心：" class="headerlink" title="1.3网络核心："></a>1.3网络核心：</h3><h5 id="数据传输的方法："><a href="#数据传输的方法：" class="headerlink" title="数据传输的方法："></a>数据传输的方法：</h5><p><strong>电路交换</strong>：资源独享（保障了性能但会有资源浪费）网络资源被分成片（频分FDM、时分TDM、波分）   连接建立时间长，计算机之间的通信有突发性所以浪费情况严重，可靠性不高导致电路交换不适合计算机之间的通信。<br><strong>分组交换</strong>：主机的带宽资源不分成一个个的片，主机和主机间的通信数据分成一个个组，以组为单位在每个交换机中存储转发（不存储的化会占用线路）。<strong>缺点</strong>：在存储时需要排队。路由器的缓存用完时新来的分组会被抛弃。<strong>优点</strong>：线路可共享</p>
<h6 id="分组交换作用下的网络核心的关键功能："><a href="#分组交换作用下的网络核心的关键功能：" class="headerlink" title="分组交换作用下的网络核心的关键功能："></a>分组交换作用下的网络核心的关键功能：</h6><p><strong>转发</strong>：局部的将分组从路由器的输入链路转移到输出链路<br><strong>路由</strong>：全局的决定分组采用的源到目标的路径</p>
<h6 id="分组交换按网络层是否连接分类："><a href="#分组交换按网络层是否连接分类：" class="headerlink" title="分组交换按网络层是否连接分类："></a>分组交换按网络层是否连接分类：</h6><p>数据报方式：分组携带目标主机完整地址，不需要握手<br>虚电路：需要握手建立虚拟电路，每个分组按照虚电路号传输</p>
<h3 id="1-4接入网和物理媒体："><a href="#1-4接入网和物理媒体：" class="headerlink" title="1.4接入网和物理媒体："></a>1.4接入网和物理媒体：</h3><h5 id="接入方式："><a href="#接入方式：" class="headerlink" title="接入方式："></a>接入方式：</h5><p><strong>modem住宅接入（猫）</strong>电话线接入<br><strong>DSL</strong>电话线带宽一部分用来上网<br><strong>线缆网络</strong>对有线电视线缆进行改造和光纤一起接入，划分带宽用于不同用处<br><strong>无线接入网络</strong>无线LAN，无线局域接入</p>
<h5 id="物理媒体："><a href="#物理媒体：" class="headerlink" title="物理媒体："></a>物理媒体：</h5><p><strong>同轴电缆</strong>双向<br><strong>光纤光缆</strong>光脉冲，高速，低误码率（不受电磁波干扰），安全<br><strong>无线线缆</strong>无需物理“线缆”。类型：地面微波、LAN、广域无线（基站）、卫星</p>
<h3 id="1-5Internet结构和ISP"><a href="#1-5Internet结构和ISP" class="headerlink" title="1.5Internet结构和ISP"></a>1.5Internet结构和ISP</h3><blockquote>
<p>互联网络结构：网络的网络</p>
</blockquote>
<p><strong>端系统通过接入ISP连接到互联网，接入ISP必须互联。</strong><br>第一层ISP：节点少，完成全球范围内的覆盖，通过Tier或IXP互相连接。<br>第二层ISP：区域性的可接入第一层ISP也可连接第二层ISP<br>第三层ISP：local ISP，把终端接进来。</p>
<h5 id="ISP之间的连接："><a href="#ISP之间的连接：" class="headerlink" title="ISP之间的连接："></a>ISP之间的连接：</h5><p>1.POP：高层ISP接入低层ISP<br>2.对等接入：两个对等的ISP互联<br>3.IXP：多个ISP互联互通<br>4.ICP部署自己的专网同时与各级ISP连接</p>
<h3 id="1-6分组延时、丢失和吞吐量"><a href="#1-6分组延时、丢失和吞吐量" class="headerlink" title="1.6分组延时、丢失和吞吐量"></a>1.6分组延时、丢失和吞吐量</h3><h5 id="分组丢失和延时的原因："><a href="#分组丢失和延时的原因：" class="headerlink" title="分组丢失和延时的原因："></a>分组丢失和延时的原因：</h5><p>分组在通过链路时要排队,队满会被丢弃</p>
<h5 id="四种分组延时："><a href="#四种分组延时：" class="headerlink" title="四种分组延时："></a>四种分组延时：</h5><p>1.节点处理延时：查路由表等操作（微秒）<br>2.排队延时：在输出链路上等待传输的时间（取决于拥塞程度-流量强度）a=分组到达队列的平均速率，流量强度I=<strong>La/R</strong>，流量强度趋近于1时通行时间无限大，等于0时最小<br>3.传输延时：R=链路带宽，L=分组长度，将分组发送到链路上的时间=<strong>L/R</strong>（低速率的链路会很大微秒到毫秒）<br>4.传播延时：d=物理链路的长度，s=在媒体上的传播速度，传播延时=<strong>d/s</strong>（几微秒到几百毫秒）</p>
<h5 id="Internet的延时和路由："><a href="#Internet的延时和路由：" class="headerlink" title="Internet的延时和路由："></a>Internet的延时和路由：</h5><p>ICMP互联网控制报文协议 目的IP+TTL（生存时间，第几跳被杀掉然后给源IP发送ICMP报文）+数据<br>RTT（round trip time）往返延迟</p>
<h5 id="分组丢失："><a href="#分组丢失：" class="headerlink" title="分组丢失："></a>分组丢失：</h5><p>丢失的分组可能会被前一个节点或源端系统重传，或根本不重传。</p>
<h5 id="吞吐量："><a href="#吞吐量：" class="headerlink" title="吞吐量："></a>吞吐量：</h5><p>单位时间内从源主机向目标主机放出的有效的bit的数量<br>瞬间吞吐量，平均吞吐量(取决于最小的管道)<strong>瓶颈链路</strong>限制了端到端吞吐量。</p>
<h3 id="1-7协议层次及服务模型"><a href="#1-7协议层次及服务模型" class="headerlink" title="1.7协议层次及服务模型"></a>1.7协议层次及服务模型</h3><h5 id="协议层次："><a href="#协议层次：" class="headerlink" title="协议层次："></a>协议层次：</h5><p><strong>计算机网络是一个复杂的系统</strong><br>功能复杂：数字信号的物理信号承载、点到点、路由、rdt、进程区分、应用等<br>构成元素复杂：主机、路由器、链路、应用、协议、软硬件<br><strong>采用分层的方法来组织实现</strong><br>把复杂的功能分为一个个功能明确的层次，每一层通过层间接口向上层提供服务。<br>通过下层提供的服务实现<strong>协议</strong>（水平的）从而更好地服务上层</p>
<blockquote>
<p>服务：低层实体向上层实体提供他们之间的通信的能力（垂直的）<br>服务用户/提供者，服务访问点SAP（区分不同的上层用户）<br>原语（primitive）：<strong>函数</strong>服务提供者通过原语告诉用户我向你提供什么服务</p>
</blockquote>
<h5 id="服务类型："><a href="#服务类型：" class="headerlink" title="服务类型："></a>服务类型：</h5><p>面向连接的服务（TCP）：两个用户在使用下层所提供的服务之前要有一个握手的关系要为之后的通信做好准备。<br>无连接的服务（UDP）：两个应用进程在通信前不握手，直接发送信息。</p>
<blockquote>
<p>服务和协议的差别：服务是垂直的，协议是水平的。<br>服务和协议的关系：本层协议的实现要借助于下层服务，目的是为了向上层提供更好地服务</p>
</blockquote>
<h5 id="数据单元（DU）："><a href="#数据单元（DU）：" class="headerlink" title="数据单元（DU）："></a>数据单元（DU）：</h5><p>SAP：层间接口，SDU（服务数据单元）：上一层交给的要传输的数据，ICI（接口控制信息）：更顺利的穿过层间接口，IDU=SDU+ICI，<strong>PDU（协议数据单元）</strong>：对等层协议交换，SDU+第n层头部信息</p>
<h5 id="分层处理的好处："><a href="#分层处理的好处：" class="headerlink" title="分层处理的好处："></a>分层处理的好处：</h5><p>概念化：结构清晰，便于标识网络组件以及描述其相互关系。<br>结构化：模块化更易于维护和系统升级，改变某一层不影响其他层。<br><strong>分层有害之处：</strong>一层层实现的效率低</p>
<h5 id="互联网协议栈："><a href="#互联网协议栈：" class="headerlink" title="互联网协议栈："></a>互联网协议栈：</h5><h6 id="应用层："><a href="#应用层：" class="headerlink" title="应用层："></a>应用层：</h6><p>应用进程通过TCP交到传输层传输给对方的TCP交给对方的应用进程。应用进程就可以通过传输层完成应用报文的交互从而实现想干的事。<br><strong>常见协议：</strong>FTP、SMTP、HTTP<br><strong>协议数据单元：</strong>报文（message）</p>
<h6 id="传输层："><a href="#传输层：" class="headerlink" title="传输层："></a>传输层：</h6><p>借助于网络层主机到主机的服务，完成进程到进程的区分。把网络层提供的不可靠的服务变成可靠的。<br><strong>常见协议：</strong>TCP、UDP<br><strong>协议数据单元：</strong>报文段（segment）：TCP段、UDP段</p>
<h6 id="网络层："><a href="#网络层：" class="headerlink" title="网络层："></a>网络层：</h6><p>在链路层提供的相邻两点的数据传输的基础之上，传输以分组为单位的<strong>端到端</strong>（源主机到目标主机）的数据传输。（E2E）<br><strong>常见协议：</strong>IP协议、路由选择协议<br><strong>协议数据单元：</strong>分组（packet），如果<strong>无连接方式（IP网络）</strong>：数据报（datagram）</p>
<h6 id="链路层："><a href="#链路层：" class="headerlink" title="链路层："></a>链路层：</h6><p>在物理层提供的服务的基础之上，在相邻的两点之间传输以帧为单位的数据。（P2P）<br><strong>常见协议：</strong>PPP，以太网协议、WLAN协议<br><strong>协议数据单元：</strong>帧（frame）</p>
<h6 id="物理层："><a href="#物理层：" class="headerlink" title="物理层："></a>物理层：</h6><p>把数字信号转换成物理信号承载在媒体之上，从一点传到相邻的另一点，对方的物理层再把物理信号转换成数字信号。（以bit为单位）<br><strong>协议数据单元：</strong>位（bit）</p>
<h5 id="ISO-OSI参考模型（七层模型）："><a href="#ISO-OSI参考模型（七层模型）：" class="headerlink" title="ISO/OSI参考模型（七层模型）："></a>ISO/OSI参考模型（七层模型）：</h5><p>在应用层和传输层之间加了表示层（表示转换）、会话层（会话管理）</p>
<h5 id="封装和解封装："><a href="#封装和解封装：" class="headerlink" title="封装和解封装："></a>封装和解封装：</h5><p>在源主机进行封装传输，到某个路由器进行下三层（物理层，链路层，网络层）的解封装与封装，到某个交换机进行下两层的解封装和封装，到目标主机进行全部的解封装</p>
<h2 id="第二章-应用层"><a href="#第二章-应用层" class="headerlink" title="第二章 应用层"></a>第二章 应用层</h2><blockquote>
<p>目标:掌握计算机网络应用的原理,网络应用协议的概念和实现方面.(传输层的服务模型,客户-服务器模式,对等模式)了解网络应用的实例,互联网流行的应用层协议.(HTTP,FTP,SMTP,DNS)编程</p>
</blockquote>
<h3 id="2-1应用层协议原理"><a href="#2-1应用层协议原理" class="headerlink" title="2.1应用层协议原理"></a>2.1应用层协议原理</h3><blockquote>
<p>一些网络应用的例子:E-mail,Web,文本信息,远程登陆,P2P文件共享,即时通信,多用户网络游戏,流媒体(youtube),Internet电话,实时电视会议,社交网络,搜索</p>
</blockquote>
<h5 id="网络应用的体系架构"><a href="#网络应用的体系架构" class="headerlink" title="网络应用的体系架构:"></a>网络应用的体系架构:</h5><p>1.客户端-服务器(C/S)模式<br>服务器一直运行且固定IP,客户端主动与服务器通信且IP不固定.<strong>问题</strong>可扩展性差,服务器宕机服务就无法享受.<br>2.P2P结构<br>几乎没有一直运行的服务器,任意端系统之间可以进行通信,每一个节点既是客户端也是服务器,参与的主机间歇性连接且可以改变IP地址,自扩展性.<strong>问题</strong>管理起来困难.<br>3.混合体<br>Napster:主机在中心服务器上注册其资源,主机向中心服务器查询资源位置,通过P2P传输</p>
<h5 id="进程通信"><a href="#进程通信" class="headerlink" title="进程通信:"></a>进程通信:</h5><p><strong>进程</strong>在主机上运行的应用进程<br>发起通信的进程叫客户端进程,等待连接的进程叫服务器进程.同一主机内,使用进程间通信机制通信.不同主机,通过交换报文来通信.<br><strong>分布式进程通信需要解决的问题</strong>1.进程标示和寻址问题2.传输层-应用层如何提供服务3.如何使用传输层提供的服务,实现应用进程之间的报文交换,实现应用,定义协议.<br>问题一:进程用IP地址和端口号标示<br>问题二:传输层提供的服务-需要穿过层间的信息(要传输的报文,源地址,目标地址),传输层实体根据信息进行报文段的封装.<br>TCP socket,用一个整数表示两个实体之间的通信关系(四元组)具有本地意义,唯一指定一个会话.<br>UDP socket,用一个整数表示本应用实体的标示,代表本地的IP和端口不代表一个会话,但传输时必须提供对方的IP和端口<br>问题三:定义应用层协议,应用协议只是应用的一部分.公开协议/私有协议.<br>传输层向应用层提供的服务的性能指标:可靠性,延迟,吞吐量,安全性<br>互联网传输层提供的服务:TCP(可靠的,流量控制发送方不会淹没接收方,拥塞控制抑制发送方,不能提供时间保障,最小吞吐量保障,安全保障)/UDP(不可靠的,没有流量控制等,<strong>省时</strong>)<br>因为TCP和UDP都不安全,跑在TCP之上的SSL提供了安全性(提供了私密性,完整性,端到端的鉴别)</p>
<h3 id="2-2Web-and-HTTP"><a href="#2-2Web-and-HTTP" class="headerlink" title="2.2Web and HTTP"></a>2.2Web and HTTP</h3><h5 id="Web："><a href="#Web：" class="headerlink" title="Web："></a>Web：</h5><p>Web页由一些对象组成。对象可以是HTML文件、JPEG图像等。通过URL对每个对象进行引用，<strong>URL格式：Prot（协议名）：//user（用户）:psw（口令）@<a target="_blank" rel="noopener" href="http://www.someschool.edu(主机名)/someDept%EF%BC%88%E8%B7%AF%E5%BE%84%E5%90%8D%EF%BC%89/pic.gif:port%EF%BC%88%E7%AB%AF%E5%8F%A3%EF%BC%89">www.someSchool.edu（主机名）/someDept（路径名）/pic.gif:port（端口）</a></strong></p>
<h5 id="HTTP："><a href="#HTTP：" class="headerlink" title="HTTP："></a>HTTP：</h5><p>超文本传输协议。先建立TCP连接，端口号为80，浏览器向web服务器发送http报文，然后受到回复。HTTP是无状态的，服务器并不维护关于客户的任何信息</p>
<h6 id="非持久HTTP："><a href="#非持久HTTP：" class="headerlink" title="非持久HTTP："></a>非持久HTTP：</h6><p>客户端向服务器发送连接建立请求，服务器在80端口上等待请求，接受连接并通知客户端，客户端向TCP连接的套接字发送HTTP请求报文，HTTP服务器收到报文并向客户端发送响应报文，客户端收到响应报文。<br>往返时间RTT：一个小分组从客户端到服务器再回到客户端的时间。一个RTT用来发起TCP连接，一个RTT用来HTTP请求并等待HTTP响应<br>非持久的缺点：每个对象都要两个RTT的时间</p>
<h6 id="持久HTTP："><a href="#持久HTTP：" class="headerlink" title="持久HTTP："></a>持久HTTP：</h6><p>服务器在发送响应后仍保持TCP连接。<br>非流水方式：客户端只能在收到前一个响应之后才能发出请求。<br>流水方式：客户端遇到一个引用对象就立即产生一个请求。</p>
<h6 id="HTTP请求报文："><a href="#HTTP请求报文：" class="headerlink" title="HTTP请求报文："></a>HTTP请求报文：</h6><p>请求行（GET、POST、HEAD命令）+首部行</p>
<h6 id="提交表单输入："><a href="#提交表单输入：" class="headerlink" title="提交表单输入："></a>提交表单输入：</h6><p>POST方式、URL方式</p>
<h6 id="HTTP响应报文："><a href="#HTTP响应报文：" class="headerlink" title="HTTP响应报文："></a>HTTP响应报文：</h6><p>状态行（协议版本，状态码，相应状态信息）+首部行+数据</p>
<h6 id="用户-服务器状态：cookie"><a href="#用户-服务器状态：cookie" class="headerlink" title="用户-服务器状态：cookie"></a>用户-服务器状态：cookie</h6><p>四个组成部分：<br>1、在HTTP响应报文中有一个cookie的首部行<br>2、在HTTP请求报文中有一个cookie的首部行<br>3、在用户端系统中保留有一个cookie文件<br>4、在web站点有一个后端数据库<br>可以用户验证，购物车，推荐，用户状态</p>
<h6 id="Web缓存（代理服务器）："><a href="#Web缓存（代理服务器）：" class="headerlink" title="Web缓存（代理服务器）："></a>Web缓存（代理服务器）：</h6><p>用户通过缓存访问Web。降低客户端的请求响应时间，可以减少一个机构内部网络与Internet接入链路上的流量，可以使较弱的ICP也能够有效提供内容</p>
<h6 id="条件GET方法："><a href="#条件GET方法：" class="headerlink" title="条件GET方法："></a>条件GET方法：</h6><p>如果缓存器中的对象拷贝是最新的，就不要发送对象</p>
<h3 id="2-3FTP"><a href="#2-3FTP" class="headerlink" title="2.3FTP"></a>2.3FTP</h3><p>文件传输协议。客户端包括用户接口，本地文件接口。服务器端口为21.<br><strong>控制连接与数据连接分开</strong>FTP客户端与FTP服务器通过21端口联系，并使用TCP为传输协议。客户端通过控制连接获得身份认证。客户端通过控制连接发送命令。服务器收到命令，跟客户端的20端口主动建立数据连接，并传输文件<br><strong>有状态</strong></p>
<h3 id="2-4Email，SMTP，POP3，IMAP"><a href="#2-4Email，SMTP，POP3，IMAP" class="headerlink" title="2.4Email，SMTP，POP3，IMAP"></a>2.4Email，SMTP，POP3，IMAP</h3><h5 id="电子邮件"><a href="#电子邮件" class="headerlink" title="电子邮件"></a>电子邮件</h5><p>三个组成部分：用户代理，邮件服务器，简单邮件传输协议（SMTP）</p>
<h6 id="用户代理"><a href="#用户代理" class="headerlink" title="用户代理"></a>用户代理</h6><p>撰写邮件的软件Outlook</p>
<h6 id="邮件服务器"><a href="#邮件服务器" class="headerlink" title="邮件服务器"></a>邮件服务器</h6><p>守候在25端口，用SMTP协议发送邮件，接受邮件到客户端邮箱（用邮件拉取协议）</p>
<h6 id="SMTP协议"><a href="#SMTP协议" class="headerlink" title="SMTP协议"></a>SMTP协议</h6><p>使用TCP在客户端和服务器之间传送报文，端口号为25.传输的三个阶段：握手，传输报文，关闭。持久连接，要求报文为七位ASCII编码，HTTP是拉，SMTP是推<br><strong>邮件报文格式</strong>首部行（To，From，CC）+主体<br>MIME：多媒体扩展（使能传输中文等）</p>
<h6 id="邮件访问协议："><a href="#邮件访问协议：" class="headerlink" title="邮件访问协议："></a>邮件访问协议：</h6><p>从服务器访问协议（拉）<br>POP3：用户确认阶段 客户端命令（user，pass），服务器响应（OK，ERR）。事务处理阶段，客户端向服务器发出指令。无状态的<br>IMAP（提供远程目录维护）服务器将每个报文与一个文件夹联系。有状态的。<br>HTTP</p>
<h3 id="2-5DNS"><a href="#2-5DNS" class="headerlink" title="2.5DNS"></a>2.5DNS</h3><p>域名解析系统</p>
<h5 id="DNS的必要性："><a href="#DNS的必要性：" class="headerlink" title="DNS的必要性："></a>DNS的必要性：</h5><p>IP地址标识主机、路由器。但IP地址不好记，所以人类用户可以使用字符串<strong>域名</strong>交给DNS交换成IP地址。</p>
<h5 id="DNS的总体思路和目标"><a href="#DNS的总体思路和目标" class="headerlink" title="DNS的总体思路和目标"></a>DNS的总体思路和目标</h5><p>主要思路：<br>分层的、基于域的命名机制<br>若干分布式的数据库完成名字到IP的转换<br>运行在UDP之上端口号为53的应用服务<br>核心的Internet功能，但以应用层协议实现<br>主要目标：<br>实现主机域名-IP地址的转换<br>主机别名到规范名字的转换<br>邮件服务器别名到邮件服务器的正规名字的转换<br>负载均衡</p>
<h5 id="DNS需要解决的问题："><a href="#DNS需要解决的问题：" class="headerlink" title="DNS需要解决的问题："></a>DNS需要解决的问题：</h5><h6 id="1-如何命名设备"><a href="#1-如何命名设备" class="headerlink" title="1.如何命名设备"></a>1.如何命名设备</h6><p>用有意义的字符串，分层化命名<br>DNS域名结构：<br>采用层次树状结构命名<br>Internet根被划分为几百个顶级域。通用的：.com，.edu等 国家的.cn等。每个子域下面可划分为若干个子域。树叶是主机。<br>根有十几个<br><strong>域名</strong>：从本域往上走直到树根<br>域名管理：<br>一个域管理其下的子域<br>域与物理网络无关：<br>域遵从组织界限。一个域的主机可以不在一个网络。</p>
<h6 id="2-如何完成名字到IP的转换"><a href="#2-如何完成名字到IP的转换" class="headerlink" title="2.如何完成名字到IP的转换"></a>2.如何完成名字到IP的转换</h6><p>分布式的数据库维护和响应名字查询<br>将DNS名字空间划分为互不相交的区域，每个区域都是树的一部分。每个区域都有一个名字服务器，名字服务器允许被放置在区域外<br>TDL服务器：顶级域服务器，负责顶级域名<br>区域名字服务器维护资源记录（域名-IP的映射关系）格式：域名+生存时间+Class类别+Value值+TYPE类别<br>TYPE=：<br>A name为主机，value为IP地址<br>NS name为域名，value为该域名的权威服务器的域名<br>CNAME 那么为规范名字的别名，value为规范名字<br>MX value为name对于的邮件服务器的名字<br>TTL：<br>生存时间，决定了资源记录应当从缓存中删除的时间<br>DNS工作过程：<br>应用调用解析器<br>解析器作为客户向Name Server发出查询报文<br>Name Server返回响应报文<br>递归查询：往上找直到根服务器，会使根服务器负担太重<br>迭代查询：根服务器返回下一个NS的地址<br>DNS协议，报文<br>DNS协议：查询和响应报文的报文格式相同<br>报文首部：标识符（ID）16位+flags</p>
<h6 id="3-如何维护"><a href="#3-如何维护" class="headerlink" title="3.如何维护"></a>3.如何维护</h6><p>增加或删除一个域，需要在域名系统中做哪些工作<br>新增一个域：<br>在上级域的名字服务器中增加两条记录，指向这个新增的子域的域名和域名服务器的地址。在新增的子域的名字服务器上运行名字服务器，负责本域的名字解析</p>
<h3 id="2-6P2P应用"><a href="#2-6P2P应用" class="headerlink" title="2.6P2P应用"></a>2.6P2P应用</h3><h5 id="C-S-VS-P2P"><a href="#C-S-VS-P2P" class="headerlink" title="C/S VS P2P"></a>C/S VS P2P</h5><h6 id="文件分发："><a href="#文件分发：" class="headerlink" title="文件分发："></a>文件分发：</h6><p>C/S:<br>都是由服务器发送给peer，服务器必须顺序传输N个文件拷贝。每个客户端必须下载一个文件拷贝。文件过多时服务器上载带宽成为瓶颈。文件少时客户端的下载能力成为瓶颈。下载时间线性增加<br>P2P：<br>服务器最少上载一份拷贝，每个客户端必须下载一个拷贝，所有客户端总体下载量NF。下载时间平缓增加。</p>
<blockquote>
<p>overlay邻居间的文件的上下载的协作关系<br>非结构化P2P：集中式目录（每个结点向目录服务器注册）、完全分布式（每个节点构建一个overlay，邻居向邻居发起查询）、混合体（每个节点属于一个组且存在组长，组长和组长之间相当于邻居，组长对于组员就是目录服务器）<br>DHT（结构化P2P）：每个节点之间可以构成环、树的关系</p>
</blockquote>
<h3 id="2-7CDN"><a href="#2-7CDN" class="headerlink" title="2.7CDN"></a>2.7CDN</h3><h5 id="多媒体流化服务："><a href="#多媒体流化服务：" class="headerlink" title="多媒体流化服务："></a>多媒体流化服务：</h5><p>DASH（动态自适应流化技术）<br>服务器将视频文件分割成多个块，每个块独立储存。告示文件会提供不同块的URL。客户端先获取告示文件，周期性地测量服务器到客户端地带宽，查询告示文件，在一个时刻请求一个块，HTTp头部指定字节范围，如果带宽足够选择码率最大的视频块</p>
<h5 id="CDN："><a href="#CDN：" class="headerlink" title="CDN："></a>CDN：</h5><p>全网部署缓存节点，存储服务内容，就近为用户提供服务。<br>enter deep：将CDN服务器深入到许多接入网<br>bring home：部署在少数关键位置，如将服务器簇安装在POP附近</p>
<h3 id="2-8TCP套接字（Socket）编程"><a href="#2-8TCP套接字（Socket）编程" class="headerlink" title="2.8TCP套接字（Socket）编程"></a>2.8TCP套接字（Socket）编程</h3><p>应用进程使用传输层提供的服务才能交换报文实现应用协议</p>
<blockquote>
<p>套接字：应用进程与端到端传输协议（TCP或UDP）之间的门户</p>
</blockquote>
<blockquote>
<p>目标：学习如何构建能借助sockets进行通信的C/S应用程序</p>
</blockquote>
<p>TCP提供可靠的、字节流的服务<br>服务器：<br>服务器先运行，创建欢迎socket，和本地端口绑定，在欢迎socket上阻塞式等待接收用户的连接<br>客户端：<br>客户端主动和服务器建立连接，创建客户端本地套接字绑到本地port上，指定服务器进程的IP地址和端口号，与服务器进程连接，连接API调用有效时，客户端与服务器建立了TCP连接。<br>客户端连接请求到来时<br>服务器接受来自用户端的请求，解除阻塞式等待，返回一个新的socket与客户端通信。允许服务器与多个客户端通信。使用源IP和源端口来区分不同的客户端</p>
<h5 id="结构体："><a href="#结构体：" class="headerlink" title="结构体："></a>结构体：</h5><p><strong>sockaddr_in</strong>:放IP、端口<br>sin_family-&gt;地址簇<br>sin_port-&gt;port<br>sin_addr-&gt;IP地址<br>sin_zero[8]-&gt;对其<br><strong>host_ent</strong>:域名解析函数，输入域名输出IP地址<br>*h_name-&gt;主机域名<br>**h_aliases-&gt;主机别名<br>h_length-&gt;地址长度<br>**h_addr_list[0]-&gt;IP列表</p>
<h3 id="2-9UDP套接字编程"><a href="#2-9UDP套接字编程" class="headerlink" title="2.9UDP套接字编程"></a>2.9UDP套接字编程</h3><p>没有握手，发送端在每一个报文中明确地指定目标的IP地址和端口号，服务器必须从收到的分组中提取出发送端的IP地址和端口号，<br>UDP提供不可靠的服务</p>
<h2 id="第三章-传输层"><a href="#第三章-传输层" class="headerlink" title="第三章 传输层"></a>第三章 传输层</h2><blockquote>
<p>目标：理解传输层的工作原理：多路复用/解复用，可靠数据传输，流量控制，拥塞控制。学习传输层协议：TCP、UDP</p>
</blockquote>
<h3 id="3-1概述和传输层协议"><a href="#3-1概述和传输层协议" class="headerlink" title="3.1概述和传输层协议"></a>3.1概述和传输层协议</h3><p>为运行在不同主机上的应用进程提供逻辑通信。<br>发送方：将应用层的报文分成报文段，然后传递给网络层<br>接收方：将报文段重组成报文，然后传递给应用层</p>
<p>传输层VS网络层<br>网络层服务：<br>主机间的逻辑通信<br>传输层服务：<br>依赖于网络层的服务（延时，带宽）<br>并对网络层的服务进行增强（数据丢失，顺序混乱，加密）</p>
<h3 id="3-2多路复用和解复用"><a href="#3-2多路复用和解复用" class="headerlink" title="3.2多路复用和解复用"></a>3.2多路复用和解复用</h3><p>在发送方多路复用：<br>从多个套接字接受来自多个进程的报文，根据套接字对应的IP地址和端口号等信息对报文段用头部加以封装（该头部信息用于以后的解复用）<br>在接收端多路解复用：<br>根据报文段的头部信息中的IP地址和端口号将接收到的报文段发给正确的套接字（和对应的应用程序）</p>
<h3 id="3-3无连接传输：UDP"><a href="#3-3无连接传输：UDP" class="headerlink" title="3.3无连接传输：UDP"></a>3.3无连接传输：UDP</h3><p>报文可能丢失、乱序<br>没有握手，每个UDP报文段都被独立的处理<br>UDP被用于流媒体，DNS，SNMP<br>UDP实现可靠传输的方式：在应用层增加可靠性，应用特定的差错恢复<br><strong>协议构成</strong>：<br>八个字节的头部：<br>源端口号（2）、目的端口号（2）、报文长度、校验和EDC<br>报文<br><strong>优点</strong>：<br>减少延时、简单、头部小（开销小）、尽可能快的发送报文段<br><strong>UDP校验和</strong>：<br>检测在被传输报文段中的差错<br>发送方：<br>将报文段的内容视为16bit的整数<br>校验和：报文段的加法和<br>发送方将校验和放在UDP的校验和字段<br>接收方：<br>计算接收到的报文段的校验和<br>检查计算出的校验和与校验和字段的内容是否相等<br><img src="/img/%E6%A0%A1%E9%AA%8C%E5%92%8C.png" alt="这是图片" title="Magic Gardens"></p>
<h3 id="3-4可靠数据传输（rdt）的原理"><a href="#3-4可靠数据传输（rdt）的原理" class="headerlink" title="3.4可靠数据传输（rdt）的原理"></a>3.4可靠数据传输（rdt）的原理</h3><blockquote>
<p>rdt在应用层，传输层和数据链路层都很重要<br>是网络top10问题<br>信道的不可靠特点决定了可靠数据传输（rdt）的复杂性</p>
</blockquote>
<h5 id="问题描述："><a href="#问题描述：" class="headerlink" title="问题描述："></a>问题描述：</h5><p><strong>步骤</strong>：<br>上层用rdt_send()将数据封装并交给下方的发送实体。<br>实体用udt_send()将分组放到信道上传输给接收方<br>接收方实体用udt_rcv()将分组接受<br>上层用deliver_data()将数据接受</p>
<p><strong>我们将</strong>：<br>渐增式地开发可靠数据传输协议地发送方和接收方<br>只考虑单向数据传输（但控制信息是双向流动的）<br>双向的数据传输问题其实是两个单向数据传输问题的综合<br>使用有限状态机（FSM）来描述发送方和接收方</p>
<h6 id="Rdt1-0："><a href="#Rdt1-0：" class="headerlink" title="Rdt1.0："></a>Rdt1.0：</h6><p>在可靠信道上的可靠数据传输<br><strong>下层的信道是完全可靠的</strong><br>没有比特出错<br>没有分组丢失<br><strong>发送方和接收方的FSM</strong><br>发送方将数据发送到下层信道<br>接收方从下层信道接收数据</p>
<blockquote>
<p>rdt1.0只干了封装解封装的事</p>
</blockquote>
<h6 id="Rdt2-0"><a href="#Rdt2-0" class="headerlink" title="Rdt2.0:"></a>Rdt2.0:</h6><p>具有比特差错的信道<br><strong>下层信道可能会出错：将分组中的比特翻转</strong><br>用校验和来检测比特出错<br><strong>怎样从差错中恢复</strong><br>确认（ACK）：接收方显式地告诉发送方分组已被正确接收<br>否定确认（NAK）：接收方显式地告诉发送方分组发生了差错<br><strong>rdt2.0中的新机制：采用差错控制编码进行差错控制</strong><br>发送方差错控制编码：缓存<br>接收方使用编码检错<br>接收方的反馈：控制报文（ACK，NAK）<br>发送方收到反馈相应的动作</p>
<h6 id="Rdt2-1："><a href="#Rdt2-1：" class="headerlink" title="Rdt2.1："></a>Rdt2.1：</h6><p><strong>考虑到ACK/NAK出错的情况</strong><br>让发送方在每个分组中加入序号<br>如果ACK/NAK出错，发送方重传当前分组</p>
<h6 id="Rdt2-2："><a href="#Rdt2-2：" class="headerlink" title="Rdt2.2："></a>Rdt2.2：</h6><p><strong>无NAK的协议</strong><br>把当前分组的反向确认用前一分组的正向确认代替</p>
<h6 id="Rdt3-0："><a href="#Rdt3-0：" class="headerlink" title="Rdt3.0："></a>Rdt3.0：</h6><p><strong>假设下层信道可能会丢失分组</strong><br>会死锁</p>
<p>方法：<br>发送端超时重传：经过一段时间没有收到ACK就重传<br>问题:<br>如果ACK只是被延迟了，重传将会导致数据重复，但利用序列号已经可以解决这个问题，接收方必须指明被正确接收的序列号<br>需要一个倒计数定时器</p>
<p>rdt3.0可以工作但链路容量比较大的情况下，性能很差（一次发一个PDU不能够充分利用链路的传输能力）<br>瓶颈在于：协议限制</p>
<p>解决：流水线协议，一次发送多个未经确认的分组<br><strong>增加序号的范围：用多个bit表示分组的序号</strong><br><strong>在发送方/接收方要有缓冲区</strong><br>发送方缓冲：未得到确认，可能需要重传<br>接收方缓存：上层用户取用数据的速率、接收到的数据速率，接收方的数据可能乱序<br><strong>两种通用的流水线协议</strong>：<br>回退N步（GBN）和选择重传（SR）</p>
<p><strong>滑动窗口（slide window）协议</strong>：<br><strong>发送缓冲区</strong>：<br>形式：内存中的一个区域，落入缓冲区的分组可以发送<br>功能：用于存放已发送，但是没有得到确认的分组<br>必要性：需要重发时可用<br><strong>发送缓冲区的大小（一次发送多少分组）</strong>：<br>停止等待协议=1<br>流水线协议&gt;1 不能很大<br><strong>发送缓冲区中的分组</strong>：<br>未发送的：落入发送缓冲区的分组，可以连续发送出去<br>已经发送的：等待对方确认的分组，发送缓冲区的分组只有得到确认才能删除<br><strong>发送窗口</strong>：发送缓冲区内容的一个范围<br>那些已发送但是未经确认分组的序号构成的空间<br>发送窗口的最大值&lt;=发送缓冲区的值<br>一开始：没有发送任何一个分组<br>后沿=前沿<br>之间为发送窗口的尺寸=0<br>每发送一个分组，前沿前移一个单位<br>**接收窗口（接收缓冲区）**：<br>接收窗口用于控制哪些分组可以接收：<br>只有收到的分组序号落入接收窗口内才允许接收<br>若序号在接收窗口外就丢弃<br>接收窗口尺寸Wr=1,则只能顺序接收 **GBN** 累计确认<br>接收窗口尺寸Wr&gt;1,则可以乱序接收 <strong>SR</strong> 独立确认（不能确定前面的分组是否到来）</p>
<p><strong>GBN和SR的异同</strong>：<br>同：<br>发送窗口&gt;1<br>不同：<br>GBN：<br>接收窗口=1<br>接收端只能顺序接收<br>重发要发整个窗口<br>SR：<br>接收窗口&gt;1<br>接收端可以乱序接收<br>重发只要发一个分组<br><strong>对比GBN和SR</strong>：<br>出错率低的时候适合GBN，链路容量大时适合SR</p>
<h3 id="3-5面向连接的传输TCP"><a href="#3-5面向连接的传输TCP" class="headerlink" title="3.5面向连接的传输TCP"></a>3.5面向连接的传输TCP</h3><p><strong>概述</strong>：<br>点对点，可靠的、按顺序的字节流，管理化（流水线），发送和接收缓存，全双工数据，面向连接，有流量控制<br><strong>TCP报文段结构</strong>：<br><img src="/img/TCP%E6%8A%A5%E6%96%87%E6%AE%B5%E7%BB%93%E6%9E%84.png" alt="这是图片" title="Magic Gardens"></p>
<blockquote>
<p>序号：<br>报文段首字节的在字节流的编号<br>确认号：<br>期望从另一方收到的下一字节的序号</p>
</blockquote>
<p><strong>TCP在IP不可靠服务的基础上建立了rdt</strong><br>管道化的报文段<br>累计确认<br>单个重传定时器</p>
<h5 id="TCP发送方事件："><a href="#TCP发送方事件：" class="headerlink" title="TCP发送方事件："></a>TCP发送方事件：</h5><p><strong>从应用层接收数据</strong><br>用nextseq创建报文段<br>序号nextseq为报文段首字节的字节流编号<br>如果还没有运行，启动定时器<br><strong>超时</strong><br>重传后沿最老的报文段<br>重启定时器<br><strong>收到确认</strong><br>如果是对尚未确认的报文段确认：<br>更新已被确认的报文序号<br>如果当前还有未确认的报文段，重新启动定时器</p>
<h3 id="3-6拥塞控制原理"><a href="#3-6拥塞控制原理" class="headerlink" title="3.6拥塞控制原理"></a>3.6拥塞控制原理</h3><p><strong>拥塞</strong>：<br>太多的数据需要网络传输，超过了网络的处理能力<br><strong>拥塞的表现</strong>：<br>分组丢失（路由器缓冲区溢出）<br>分组经历比较长的延迟（在路由器的队列中排队）</p>
<h5 id="拥塞的原因-代价："><a href="#拥塞的原因-代价：" class="headerlink" title="拥塞的原因/代价："></a>拥塞的原因/代价：</h5><p>场景1：<br>两个发送端，两个接收端<br>一个路由器具有无限大的缓冲<br>输入链路带宽：R<br>没有重传<br>场景2：<br>一个路由器，有限的缓冲<br>分组丢失时，发送端重传<br>场景3：<br>四个发送端<br>多重路径<br>超时重传</p>
<h5 id="拥塞控制方法："><a href="#拥塞控制方法：" class="headerlink" title="拥塞控制方法："></a>拥塞控制方法：</h5><p><strong>端到端拥塞控制</strong>：<br>没有来自网络的显示反馈<br>端系统根据延迟和丢失事件推断是否有拥塞<br>TCP采用的方法<br><strong>网络辅助的拥塞控制</strong>：<br>路由器提供给端系统以反馈信息<br>单个bit置位，显示有拥塞<br>显式提供发送端可以采用的速率</p>
<h3 id="3-7TCP拥塞控制"><a href="#3-7TCP拥塞控制" class="headerlink" title="3.7TCP拥塞控制"></a>3.7TCP拥塞控制</h3><p>机制：<br>端到端的拥塞控制机制<br>路由器不向主机发送有关拥塞的反馈信息，路由器的负担较轻，符合网络核心简单的TCP/IP架构原则<br>端系统根据自身得到的信息，判断是否发生拥塞，从而采取动作</p>
<blockquote>
<p>拥塞控制的几个问题：<br>如何检测拥塞？<br>轻微拥塞<br>拥塞<br>控制策略：<br>在拥塞发生时如何动作？降低速率<br>在拥塞缓解时如何动作？增加速率</p>
</blockquote>
<p><strong>发送端如何探测到拥塞？</strong><br>1.某个段超时<br>2.有关某个段的三个冗余ACK</p>
<p><strong>如何控制发送端发送的速率？</strong><br>超时：把拥塞窗口变为1MSS，进入慢启动阶段然后再倍增到CongWin/2（每个RTT），从而进入CA阶段<br>3个重复ACK：CongWin降为1/2，CA阶段</p>
<h2 id="第四章-网络层：数据平面"><a href="#第四章-网络层：数据平面" class="headerlink" title="第四章 网络层：数据平面"></a>第四章 网络层：数据平面</h2><blockquote>
<p>目标：理解网络层数据平面的基本原理：网络服务模型、转发和路由（传统方式和SDN方式）、路由器工作原理、通用转发。互联网中网络层协议的实例和实现</p>
</blockquote>
<h3 id="4-1导论"><a href="#4-1导论" class="headerlink" title="4.1导论"></a>4.1导论</h3><h5 id="网络层提供的服务"><a href="#网络层提供的服务" class="headerlink" title="网络层提供的服务:"></a>网络层提供的服务:</h5><p>在发送主机和接收主机之间传送段（segment）<br>在发送端将段封装到数据报中<br>在接收端将段上交给传输层实体<br>网络层协议存在于每一个主机和路由器<br>路由器检查每一个经过它的IP数据报头部</p>
<h5 id="网络层的关键功能"><a href="#网络层的关键功能" class="headerlink" title="网络层的关键功能:"></a>网络层的关键功能:</h5><p><strong>转发（数据平面）</strong>：<br>将分组从路由器的输入接口转发到合适的输出接口<br><strong>路由（控制平面）</strong>：<br>决定分组从发送主机到目标接收主机的路径</p>
<h5 id="数据平面、控制平面："><a href="#数据平面、控制平面：" class="headerlink" title="数据平面、控制平面："></a>数据平面、控制平面：</h5><p><strong>数据平面</strong>：<br>本地，每个路由器功能<br>决定从路由器输入端口到达的分组如何转发到输出端口<br>转发功能：<br>传统方式：基于目标地址+转发表<br>SDN方式：基于多个字段+流表<br><strong>控制平面</strong>：<br>网络范围内的逻辑<br>决定数据报如何在路由器之间路由、决定数据报从源到目标主机之间的端到端路径<br>2个控制平面方法：<br>传统的路由算法：在路由器中被实现<br>SDN：在远程的服务器中实现</p>
<h5 id="实现方式："><a href="#实现方式：" class="headerlink" title="实现方式："></a>实现方式：</h5><p>传统方式实现：控制平面生成路由表，数据平面IP协议根据路由表进行操作。<br>SDN方式实现：网络操作系统算出流表，通过南向接口传给交换设备，交换设备将流表装载，对到来的分组进行匹配，然后对分组做转发、阻塞、泛洪等操作。</p>
<h5 id="网络服务模型："><a href="#网络服务模型：" class="headerlink" title="网络服务模型："></a>网络服务模型：</h5><p>从发送方主机到接收方主机传输数据报的“通道”，网络提供什么样的服务模型？<br><strong>对于单个数据报的服务</strong>：<br>可靠传送<br>延迟保证，如：少于40ms的延迟<br><strong>对于数据报流的服务</strong>：<br>保序数据报传送<br>保证流的最小宽度<br>分组之间的延迟差</p>
<h5 id="网络层和传输层连接服务区别："><a href="#网络层和传输层连接服务区别：" class="headerlink" title="网络层和传输层连接服务区别："></a>网络层和传输层连接服务区别：</h5><p>网络层：（有连接）在两个主机之间，涉及到路径上的一些路由器<br>传输层：（面向连接）在两个进程之间，很可能只体现在端系统上（TCP连接）</p>
<h3 id="4-2路由器组成"><a href="#4-2路由器组成" class="headerlink" title="4.2路由器组成"></a>4.2路由器组成</h3><h5 id="路由器结构概况："><a href="#路由器结构概况：" class="headerlink" title="路由器结构概况："></a>路由器结构概况：</h5><p>路由：运行路由选择算法/协议生成路由表<br>转发：从输入到输出链路交换数据报-根据路由表进行分组的转发</p>
<h5 id="输入端口功能"><a href="#输入端口功能" class="headerlink" title="输入端口功能"></a>输入端口功能</h5><p>分布式交换：<br>根据数据报头部的信息如：目的地址，在输入端口内存中的转发表中查找合适的输出端口<br>基于目标的转发：仅仅依赖于IP数据报的目标IP地址<br>通用转发：基于头部字段的任意集合进行转发</p>
<h5 id="输入端口缓存"><a href="#输入端口缓存" class="headerlink" title="输入端口缓存"></a>输入端口缓存</h5><p>当交换机的速率小于输入输出端口的汇聚速率时-&gt;在输入端口可能要排队<br>HOL blocking：排在队头的数据报阻止了队列中其他数据向前移动</p>
<h5 id="交换结构"><a href="#交换结构" class="headerlink" title="交换结构"></a>交换结构</h5><p>将分组从输入缓冲区传输到合适的输出端口<br>交换速率：分组可以按照该速率从输入传输到输出<br><strong>三种交换机构</strong>：<br>基于memory（内存），bus（总线），crossbar（互联网络）</p>
<h5 id="输出端口"><a href="#输出端口" class="headerlink" title="输出端口"></a>输出端口</h5><p>当数据报从交换机构的到达速度比传输速率快就需要输出端口缓存<br>由调度规则选择排队的数据报进行传输</p>
<h5 id="输出端口排队"><a href="#输出端口排队" class="headerlink" title="输出端口排队"></a>输出端口排队</h5><p>当多个输入端口同时向输出端口发送时，缓冲该分组<br>排队带来延迟，由于输出端口缓存溢出则丢弃数据报</p>
<h5 id="调度机制"><a href="#调度机制" class="headerlink" title="调度机制"></a>调度机制</h5><p>调度：选择下一个要通过链路传输的分组<br>FIFO：按照分组到来的次序发送</p>
<h5 id="调度策略："><a href="#调度策略：" class="headerlink" title="调度策略："></a>调度策略：</h5><p>优先权：<br>先发送最高优先权的分组<br>Round Robin：<br>每个类在每一个循环中获得不同权重的服务量</p>
<h3 id="4-3IP协议"><a href="#4-3IP协议" class="headerlink" title="4.3IP协议"></a>4.3IP协议</h3><h5 id="IP分片和重组"><a href="#IP分片和重组" class="headerlink" title="IP分片和重组"></a>IP分片和重组</h5><p>网络链路由MTU（最大传输单元）-链路层帧所携带的最大数据长度<br>不同的链路类型由不同的MTU</p>
<p>大的IP数据报在网络上被分片<br>一个数据报被分割成若干个小的数据报<br>相同的IP<br>不同的偏移量<br>最后一个分片标记为0<br>重组只在最终的目标主机进行<br>IP头部的信息用于标记，排序相关的分片</p>
<h5 id="IP编址：引论"><a href="#IP编址：引论" class="headerlink" title="IP编址：引论"></a>IP编址：引论</h5><p>IP地址：32位标示<br>接口：主机/路由器和物理链路的连接处<br>一个IP地址和一个接口相关联</p>
<h5 id="子网"><a href="#子网" class="headerlink" title="子网"></a>子网</h5><p>IP地址：<br>子网部分（高位bits）<br>主机部分（低位bits）<br>什么是子网？<br>一个子网内部的节点它们的IP地址的高位部分相同，这些节点构成的网络的一部分叫做子网<br>无需路由器介入，子网内各主机可以在物理上相互直接到达<br>方法：<br>要判断一个子网，将每一个接口从主机或者路由器上分开，构成了一个个网络的孤岛<br>每一个孤岛都是一个都可以被称为subnet</p>
<h5 id="特殊IP地址"><a href="#特殊IP地址" class="headerlink" title="特殊IP地址"></a>特殊IP地址</h5><p>子网部分：全为0–本网络<br>主机部分：全为0–本主机<br>主机部分：全为1–广播地址，这个网络的所有主机<br>内网专用IP地址<br>A类：10.0.0.0-10.255.255.255<br>B类：172.16.0.0-172.31.255.255<br>C类：192.168.0.0-192.168.255.255</p>
<h5 id="IP编址：CIDR"><a href="#IP编址：CIDR" class="headerlink" title="IP编址：CIDR"></a>IP编址：CIDR</h5><p>子网部分可以在任意的位置<br>地址格式：a.b.c.d/x，其中x是地址中子网号的长度</p>
<h5 id="如何获得一个IP地址"><a href="#如何获得一个IP地址" class="headerlink" title="如何获得一个IP地址"></a>如何获得一个IP地址</h5><p>系统管理员将地址配置在一个文件中<br>DHCP协议：从服务器中动态获得一个IP地址，DHCP是在UDP之上</p>
<p>如何获得一个网络的子网部分？<br>从ISP获得地址块中分配一个小地址块</p>
<h5 id="IPv6"><a href="#IPv6" class="headerlink" title="IPv6"></a>IPv6</h5><p>动机：<br>32-bits地址空间被用完<br>头部格式改变帮助加速处理和转发</p>
<p>数据报格式：<br>固定的40字节头部<br>数据报传输过程中，不允许分片</p>
<p>头部：<br>Priority标示流中数据报的优先级<br>Flow Label：标示数据报在一个“flow”<br>Next header：标示上层协议</p>
<p>和IPv4的其他变化：<br>Checksum被移除，降低在每一段中的处理速度<br>Options：允许，但是在头部之外，被“Next Header”字段标示<br>ICMPv6：ICMP的新版本，附加了报文类型，多播组管理功能</p>
<h3 id="4-4通用转发和SDN"><a href="#4-4通用转发和SDN" class="headerlink" title="4.4通用转发和SDN"></a>4.4通用转发和SDN</h3><h5 id="SDN：逻辑上集中的控制平面"><a href="#SDN：逻辑上集中的控制平面" class="headerlink" title="SDN：逻辑上集中的控制平面"></a>SDN：逻辑上集中的控制平面</h5><p>主要思路：<br>网络设备数据平面和控制平面分离<br>数据平面：分组交换机<br>控制平面：控制器+网络应用</p>
<p>相比于传统方式的优势：<br>水平集成控制平面的开放实现，创造出好的产业生态<br>集中式实现控制逻辑，网络管理容易<br>基于流表的匹配+行动的工作方式允许“可编程的”分组交换机</p>
<p>SDN的特点：<br>1.基于流的匹配+行动<br>2.控制平面和数据平面分离<br>3.控制平面功能在数据交换设备之外实现</p>
<p>SDN架构：<br><strong>数据平面交换机</strong><br>快速，简单，商业化交换设备，采用硬件实现通用转发功能<br>流表被控制器计算和安装<br>基于南向API，SDN控制器访问基于流的交换机<br>定义了和控制器的协议<br><strong>SDN控制器</strong><br>维护网络状态信息<br>通过上面的北向API和网络控制应用交互<br>通过下面的南向API和网络交换机交互<br>逻辑上集中，但是在实现上通常由于性能，可扩展性，容错性以及鲁棒性采用分布式方式<br><strong>控制应用</strong><br>控制的大脑：采用下层提供的服务（SDN控制器提供的API），实现网络功能（路由器，交换机，接入控制，防火墙，负载均衡）<br>非绑定：可以被第三方提供，与控制器厂商以通常上不同，与分组交换机厂商也可以不同</p>
<h2 id="第五章-网络层：控制平面"><a href="#第五章-网络层：控制平面" class="headerlink" title="第五章 网络层：控制平面"></a>第五章 网络层：控制平面</h2><blockquote>
<p>目标：理解网络层控制平面的工作原理</p>
</blockquote>
<h3 id="5-1路由选择算法"><a href="#5-1路由选择算法" class="headerlink" title="5.1路由选择算法"></a>5.1路由选择算法</h3><h5 id="路由协议"><a href="#路由协议" class="headerlink" title="路由协议"></a>路由协议</h5><p>路由协议的目标：确定从发送主机到接收主机之间，通过路由器的网络“较好”路径<br>路径：路由器的序列，分组将会沿着该序列从源主机到达最后的目标主机<br>“较好”：最小“代价”，“最快的”<br>路由：一个“top-10”网络挑战</p>
<h5 id="路由的概念"><a href="#路由的概念" class="headerlink" title="路由的概念"></a>路由的概念</h5><p>按照某种指标（传输延迟，所经过的站点数等）找到一条从源节点到目标节点的较好路径<br>路由器-路由器之间的最优路径 = 主机对之间的最优路径<br>路由选择算法：网络层软件的一部分，完成路由功能</p>
<h5 id="最优化原则"><a href="#最优化原则" class="headerlink" title="最优化原则"></a>最优化原则</h5><p>汇集树：<br>此节点到其他所有节点的最优路径形成的树<br>路由选择算法就是为所有路由器找到并使用汇集树</p>
<h5 id="路由的原则"><a href="#路由的原则" class="headerlink" title="路由的原则"></a>路由的原则</h5><p><strong>路由选择算法的原则</strong>：<br>正确性，简单性，健壮性（能适应通信量和网络拓扑的变化），稳定性，公平性，最优性（如果获得最优的代价较大可以选择次优）</p>
<h5 id="路由算法分类"><a href="#路由算法分类" class="headerlink" title="路由算法分类"></a>路由算法分类</h5><p><strong>全局</strong><br>所有的路由器拥有完整的拓扑和边的代价的信息<br>“link state”算法<br><strong>分布式</strong><br>路由器只知道与它有物理连接关系的邻居路由器，和到相应邻居路由器的代价值<br>迭代地与邻居交换路由信息，计算路由信息<br>“distance vector”算法</p>
<p><strong>静态</strong><br>路由随时间变化缓慢<br><strong>动态</strong><br>路由变化快</p>
<h5 id="LS路由的工作流程（link-state）"><a href="#LS路由的工作流程（link-state）" class="headerlink" title="LS路由的工作流程（link state）"></a>LS路由的工作流程（link state）</h5><p>获得网络拓扑和链路代价信息-&gt;使用最短路由算法得到路由表-&gt;使用此路由表<br>1.发现相邻节点，获知对方网络地址<br>2.测量到相邻节点的代价<br>3.组装一个LS分组，描述它到相邻节点的代价情况<br>4.将分组通过扩散的方法发到所有其它路由器<br>以上四步让每个路由器获得拓扑和边代价<br>5.通过Dijkstra算法找出最短路径<br>每个节点独立算出来到其他节点的最短路径<br>迭代算法：第k步能够知道本节点到k个节点的最短路径<br>ospf协议是一种LS协议</p>
<h5 id="LS路由选择算法的工作原理"><a href="#LS路由选择算法的工作原理" class="headerlink" title="LS路由选择算法的工作原理"></a>LS路由选择算法的工作原理</h5><p>节点标记：每一个节点使用（D（v），p（v））如：（3，B）标记<br>D（v）从源节点由已知最优路径到达本节点的距离<br>P（v）前序节点<br>2类节点：<br>临时节点：还没有找到从源节点到此节点的最优路径的节点<br>永久节点：已经找到了从源节点到此节点的最优路径的节点</p>
<p>初始化<br>除了源节点外，所有节点都为临时节点<br>节点代价除了与源节点代价相邻的节点外都为无穷大<br>从所有临时节点中找到一个节点代价最小的临时节点，将之变成永久节点W<br>对此节点的所有在临时节点集合中的邻节点（V）<br>如D（v）&gt;D（w）+c（w，v），则重新标注此点<br>再重新开始新的循环</p>
<h5 id="距离矢量路由选择的基本思想（distance-vector）"><a href="#距离矢量路由选择的基本思想（distance-vector）" class="headerlink" title="距离矢量路由选择的基本思想（distance vector）"></a>距离矢量路由选择的基本思想（distance vector）</h5><p>各路由器维护一张路由表<br>各路由与相邻路由器交换路由表<br>根据获得的路由信息，更新路由表</p>
<h5 id="距离矢量算法"><a href="#距离矢量算法" class="headerlink" title="距离矢量算法"></a>距离矢量算法</h5><p>核心思路：<br>每个节点都将自己的距离矢量估计值送给邻居，定时或者DV有变化时，让对方去算<br>当x从邻居收到DV时，自己运算，更新它自己的距离矢量<br>估计值最终收敛于实际最小代价值<br>异步式迭代：<br>迭代<br>本地链路代价变换时，从邻居来了DV的更新消息时<br>异步式<br>每个节点只是在自己的DV改变之后向邻居通告<br>DV的特点：<br>好消息传得快，坏消息传得慢<br>好消息的传播以每一个交换周期前进一个路由器的速度进行</p>
<h5 id="LS算法和DV算法比较"><a href="#LS算法和DV算法比较" class="headerlink" title="LS算法和DV算法比较"></a>LS算法和DV算法比较</h5><p>消息复杂度（DV胜出）<br>LS算法要在每个节点泛洪，DV算法只需要在邻居间传输<br>收敛时间（LS胜出）<br>LS是一次性的<br>DV算法要经过很多次迭代<br>健壮性（LS胜出）<br>LS：<br>节点会通告不正确的链路代价<br>每个节点只计算自己的路由表<br>错误信息影响较小，局部，路由较健壮<br>DV：<br>DV节点可能通告对全网所有节点的不正确路径代价<br>每一个节点的路由表可能被其他节点使用</p>
<h3 id="5-2因特网中自治系统内部的路由选择协议"><a href="#5-2因特网中自治系统内部的路由选择协议" class="headerlink" title="5.2因特网中自治系统内部的路由选择协议"></a>5.2因特网中自治系统内部的路由选择协议</h3><h5 id="RIP"><a href="#RIP" class="headerlink" title="RIP"></a>RIP</h5><p>使用DV算法<br>距离矢量，每条链路cost=1<br>DV每隔30秒和邻居交换DV<br>每个通告包括最多25个目标子网<br>如果180秒没有收到通告信息就代表邻居或者链路失效<br>RIP以应用进程的方式实现<br>通告报文通过UDP报文传送，周期性重复<br>网络层的协议使用了传输层的服务，以应用层的实体的方式实现</p>
<h5 id="OSPF"><a href="#OSPF" class="headerlink" title="OSPF"></a>OSPF</h5><p>使用LS算法<br>OSPF通告信息中携带：每一个邻居路由器一个表项<br>通告信息会传遍<br><strong>高级特性</strong><br>安全<br>允许有多个代价相同的路径存在<br>对于每一个链路，对于不同的TOS有多重代价矩阵<br>对单播和多播的集成支持<br>在大型网络中支持层次性OSPF<br>层次性的OSPF路由<br>2个级别的层次性：本地，骨干<br>链路状态通告仅仅在本地区域内进行<br>每一个节点拥有本地区域的拓扑信息<br>区域边界路由器：汇总到自己区域内网络的距离，向其他区域边界路由器通告<br>骨干路由器：仅仅在骨干区域内，允许OSPF路由<br>边界路由器：连接其他的ASs</p>
<h3 id="5-3ISP之间的路由BGP"><a href="#5-3ISP之间的路由BGP" class="headerlink" title="5.3ISP之间的路由BGP"></a>5.3ISP之间的路由BGP</h3><h5 id="层次路由"><a href="#层次路由" class="headerlink" title="层次路由"></a>层次路由</h5><p>一个平面的路由<br>一个网络中的所有路由器的地位一样<br>通过LS，DV，或者其他路由算法，所有路由器都要知道其他所有路由器如何走<br>所有路由器在一个平面<br>平面路由的问题<br>代价巨大<br>管理困难<br><strong>层次路由</strong>：<br>将互联网分成一个个AS（区域）<br>每个区域内的路由器集合，自治<br>一个AS用ASN唯一标识<br>一个ISP可能包括一个或多个AS<br>路由变成了：两个层次路由<br>AS内部路由<br>AS间运行AS间路由协议<br><strong>优点</strong><br>解决了规模问题<br>内部网关协议解决：AS内部数量有限的路由器相互到达的问题<br>AS之间的路由的规模问题<br>解决了管理问题<br>各个AS可以运行不同的内部网关协议<br>可以使自己网络的细节不向外透露</p>
<h5 id="BGP"><a href="#BGP" class="headerlink" title="BGP"></a>BGP</h5><p>BGP：自治区域间路由协议事实上的标准<br>BGP提供给每个AS以一下方法：<br>eBGP：从相邻的ASes那里获得子网可达信息<br>iBGP：将获得的子网可达信息传遍到AS内部的所有路由器<br>根据子网可达信息和策略来决定到达子网的好路径<br>允许子网向互联网其他网络通告“我在这里”<br>基于距离矢量算法</p>
<h5 id="BGP基础"><a href="#BGP基础" class="headerlink" title="BGP基础"></a>BGP基础</h5><p>BGP会话：2个BGP路由器在一个半永久的YCP连接上交换BGP报文<br>通告向不同目标子网前缀的“路径”</p>
<h5 id="BGP属性"><a href="#BGP属性" class="headerlink" title="BGP属性"></a>BGP属性</h5><p>AS-PATH：前缀的通告所经过的AS列表<br>检测环路：多路径选择<br>在向其他AS转发时，需要将自己的AS号加在路径上<br>NEXT-HOP：从当前AS到下一跳AS有多少个链路，在NEXT-HOP属性中，告诉对方通过哪个I转发</p>
<h5 id="BGP报文"><a href="#BGP报文" class="headerlink" title="BGP报文"></a>BGP报文</h5><p>使用TCP协议交换BGP报文<br>BGP报文：<br>OPEN：打开TCP连接，认证发送方<br>UPDATE：通告新路径<br>KEEPALIVE：在没有更新时保持连接，也用于对OPEN请求确认<br>NOTIFICATION：报告以前消息的错误，也用来关闭连接</p>
<h5 id="BGP路径选择"><a href="#BGP路径选择" class="headerlink" title="BGP路径选择"></a>BGP路径选择</h5><p>1.本地偏好值属性：偏好策略决定<br>2.最短AS-PATH：AS的跳数<br>3.最近的NEXT-HOP路由器：热土豆路由<br>4.附加的判断：使用BGP标示</p>
<h5 id="为什么内部网关协议与外部网关协议如此不同？"><a href="#为什么内部网关协议与外部网关协议如此不同？" class="headerlink" title="为什么内部网关协议与外部网关协议如此不同？"></a>为什么内部网关协议与外部网关协议如此不同？</h5><p>策略：<br>Inter-AS：管理员需要控制通信路径，谁在使用它的网络继续数据传输<br>Intra-AS：一个管理员，所以无需策略<br>规模：<br>AS间路由必须考虑规模问题，以便支持全网的数据转发<br>AS内部路由规模不是一个大的问题（如果AS太大可以分成小的AS）<br>性能：<br>Intra-AS：关注性能<br>Inter-AS：策略可能比性能更重要</p>
<h3 id="5-4SDN控制平面"><a href="#5-4SDN控制平面" class="headerlink" title="5.4SDN控制平面"></a>5.4SDN控制平面</h3><p>为什么需要一个逻辑上集中的控制平面？<br>网络管理更容易：避免路由器的错误配置，对于通信流的弹性更好<br>基于流表的转发，允许“可编程”路由器<br>控制平面的开放实现</p>
<h2 id="第六章-数据链路层和局域网"><a href="#第六章-数据链路层和局域网" class="headerlink" title="第六章 数据链路层和局域网"></a>第六章 数据链路层和局域网</h2><blockquote>
<p>目标:理解数据链路层服务的原理：纠错、多点接入、寻址、LAN、rdt、流量控制。</p>
</blockquote>
<h3 id="6-1导论"><a href="#6-1导论" class="headerlink" title="6.1导论"></a>6.1导论</h3><h4 id="术语"><a href="#术语" class="headerlink" title="术语"></a>术语</h4><p>结点（nodes）：主机、交换机等<br>链路（links）：把结点连到一起<br>帧（frame）：封装数据报</p>
<h4 id="提供的服务"><a href="#提供的服务" class="headerlink" title="提供的服务"></a>提供的服务</h4><p>成帧：封装<br>在相邻两点之间完成可靠数据传递<br>流量控制<br>检错、纠错<br>全双工、半双工</p>
<h3 id="6-2差错纠正"><a href="#6-2差错纠正" class="headerlink" title="6.2差错纠正"></a>6.2差错纠正</h3><h4 id="错误检测"><a href="#错误检测" class="headerlink" title="错误检测"></a>错误检测</h4><p>EDC（差错检错位）、D<br>不是完全可靠</p>
<h4 id="奇偶校验"><a href="#奇偶校验" class="headerlink" title="奇偶校验"></a>奇偶校验</h4><h4 id="CRC（循环冗余校验码）"><a href="#CRC（循环冗余校验码）" class="headerlink" title="CRC（循环冗余校验码）"></a>CRC（循环冗余校验码）</h4><p>1.模2运算：<br>加法不进位，减法不借位（异或）<br>2.位串的两种表示：<br>1011=<br>1x^3+0x^2+1x+1x^0<br>3.生成多项式G<br>r次方，r+1位<br>4.约定<br>发送方D+EDC<br>接收方（D+EDC）/G<br>D左移r位再除以生成多项式</p>
<h3 id="6-3多点访问协议"><a href="#6-3多点访问协议" class="headerlink" title="6.3多点访问协议"></a>6.3多点访问协议</h3><p>早期以太网、无线局域网<br>我发，所有的都能接受。同时发会有问题</p>
<h4 id="MAC："><a href="#MAC：" class="headerlink" title="MAC："></a>MAC：</h4><p>决定谁使用信道</p>
<h6 id="信道划分：（固定划分）"><a href="#信道划分：（固定划分）" class="headerlink" title="信道划分：（固定划分）"></a>信道划分：（固定划分）</h6><p>TDMA划分时间片<br>FDMA分频<br>高负荷利用率高</p>
<h6 id="随机访问："><a href="#随机访问：" class="headerlink" title="随机访问："></a>随机访问：</h6><p>没有协调，会有冲突<br>时隙ALOHA：以一个时隙为一个单位。碰撞后抛硬币，谁赢谁走<br>纯ALOHA：什么时间都可以。碰撞概率大了，可能和多个帧碰撞。<br>CSMA：在发之前看看有没有真在使用的，由于传播延迟仍有可能发生冲突<br>CSMA/CD：边说边听，发现有冲突后就立即停止发送<br>CSMA/CA：基站AP，自组织网络。没有冲突检测（会收到自己的信号大于别人的信号）在事前听，忙的话在窗口中选一个值，空闲的时候减一，到零就能有访问权<br>低负载利用率高</p>
<h6 id="依次轮流："><a href="#依次轮流：" class="headerlink" title="依次轮流："></a>依次轮流：</h6><p>轮询：<br>主结点问别的结点有没有数据发<br>分布式轮询：<br>令牌在各个结点之间轮转，要发送数据时就抓住令牌</p>
<h3 id="6-4LANS"><a href="#6-4LANS" class="headerlink" title="6.4LANS"></a>6.4LANS</h3><h4 id="ARP协议"><a href="#ARP协议" class="headerlink" title="ARP协议"></a>ARP协议</h4><p>MAC地址48位，区分一个<strong>子网内部</strong>的网卡。全1是广播地址<br>IP地址32位，是分层的<br>作用：完成由ip地址到mac地址的转换</p>
<h4 id="交换机"><a href="#交换机" class="headerlink" title="交换机"></a>交换机</h4><p>存储后转发<br>主机对交换机的存在可以不关心<br>自学习，学习交换表和栈表<br>点到点：主机直接接交换机</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="http://example.com">Cj</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2023/04/12/%E8%AE%A1%E7%BD%91/">http://example.com/2023/04/12/%E8%AE%A1%E7%BD%91/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">Cj的blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="/img/default_cover_4.webp" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/04/23/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E7%AE%97%E6%B3%95/" title="算法学习"><img class="cover" src="/img/default_cover_3.webp" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">算法学习</div></div></a></div><div class="next-post pull-right"><a href="/2023/04/07/test/" title="test"><img class="cover" src="/img/default_cover_5.webp" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">test</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/touxiang.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Cj</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">9</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">0</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/cj1officicial"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/cj1officicial" target="_blank" title="Github"><i class="fab fa-github"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%AE%A1%E7%BD%91%E5%AD%A6%E4%B9%A0"><span class="toc-number">1.</span> <span class="toc-text">计网学习</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E7%AB%A0-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%92%8C%E5%9B%A0%E7%89%B9%E7%BD%91"><span class="toc-number">1.1.</span> <span class="toc-text">第一章 计算机网络和因特网</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1%E4%BB%80%E4%B9%88%E6%98%AFInternet%EF%BC%9F"><span class="toc-number">1.1.1.</span> <span class="toc-text">1.1什么是Internet？</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%EF%BC%9A"><span class="toc-number">1.1.1.0.1.</span> <span class="toc-text">网络：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%EF%BC%9A"><span class="toc-number">1.1.1.0.2.</span> <span class="toc-text">计算机网络：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BA%92%E8%81%94%E7%BD%91%EF%BC%9A"><span class="toc-number">1.1.1.0.3.</span> <span class="toc-text">互联网：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8D%8F%E8%AE%AE%EF%BC%9A"><span class="toc-number">1.1.1.0.4.</span> <span class="toc-text">协议：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2%E7%BD%91%E7%BB%9C%E8%BE%B9%E7%BC%98%EF%BC%9A"><span class="toc-number">1.1.2.</span> <span class="toc-text">1.2网络边缘：</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E8%BF%9B%E7%A8%8B%E9%97%B4%E7%9A%84%E9%80%9A%E4%BF%A1%E6%A8%A1%E5%BC%8F%EF%BC%9A"><span class="toc-number">1.1.2.0.1.</span> <span class="toc-text">应用进程间的通信模式：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E8%AE%BE%E6%96%BD%E4%B8%BA%E7%BD%91%E7%BB%9C%E5%BA%94%E7%94%A8%E6%8F%90%E4%BE%9B%E7%9A%84%E6%9C%8D%E5%8A%A1%EF%BC%9A"><span class="toc-number">1.1.2.0.2.</span> <span class="toc-text">基础设施为网络应用提供的服务：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3%E7%BD%91%E7%BB%9C%E6%A0%B8%E5%BF%83%EF%BC%9A"><span class="toc-number">1.1.3.</span> <span class="toc-text">1.3网络核心：</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%9A"><span class="toc-number">1.1.3.0.1.</span> <span class="toc-text">数据传输的方法：</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E4%BA%A4%E6%8D%A2%E4%BD%9C%E7%94%A8%E4%B8%8B%E7%9A%84%E7%BD%91%E7%BB%9C%E6%A0%B8%E5%BF%83%E7%9A%84%E5%85%B3%E9%94%AE%E5%8A%9F%E8%83%BD%EF%BC%9A"><span class="toc-number">1.1.3.0.1.1.</span> <span class="toc-text">分组交换作用下的网络核心的关键功能：</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E4%BA%A4%E6%8D%A2%E6%8C%89%E7%BD%91%E7%BB%9C%E5%B1%82%E6%98%AF%E5%90%A6%E8%BF%9E%E6%8E%A5%E5%88%86%E7%B1%BB%EF%BC%9A"><span class="toc-number">1.1.3.0.1.2.</span> <span class="toc-text">分组交换按网络层是否连接分类：</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4%E6%8E%A5%E5%85%A5%E7%BD%91%E5%92%8C%E7%89%A9%E7%90%86%E5%AA%92%E4%BD%93%EF%BC%9A"><span class="toc-number">1.1.4.</span> <span class="toc-text">1.4接入网和物理媒体：</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%8E%A5%E5%85%A5%E6%96%B9%E5%BC%8F%EF%BC%9A"><span class="toc-number">1.1.4.0.1.</span> <span class="toc-text">接入方式：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%89%A9%E7%90%86%E5%AA%92%E4%BD%93%EF%BC%9A"><span class="toc-number">1.1.4.0.2.</span> <span class="toc-text">物理媒体：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-5Internet%E7%BB%93%E6%9E%84%E5%92%8CISP"><span class="toc-number">1.1.5.</span> <span class="toc-text">1.5Internet结构和ISP</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#ISP%E4%B9%8B%E9%97%B4%E7%9A%84%E8%BF%9E%E6%8E%A5%EF%BC%9A"><span class="toc-number">1.1.5.0.1.</span> <span class="toc-text">ISP之间的连接：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-6%E5%88%86%E7%BB%84%E5%BB%B6%E6%97%B6%E3%80%81%E4%B8%A2%E5%A4%B1%E5%92%8C%E5%90%9E%E5%90%90%E9%87%8F"><span class="toc-number">1.1.6.</span> <span class="toc-text">1.6分组延时、丢失和吞吐量</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E4%B8%A2%E5%A4%B1%E5%92%8C%E5%BB%B6%E6%97%B6%E7%9A%84%E5%8E%9F%E5%9B%A0%EF%BC%9A"><span class="toc-number">1.1.6.0.1.</span> <span class="toc-text">分组丢失和延时的原因：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9B%9B%E7%A7%8D%E5%88%86%E7%BB%84%E5%BB%B6%E6%97%B6%EF%BC%9A"><span class="toc-number">1.1.6.0.2.</span> <span class="toc-text">四种分组延时：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Internet%E7%9A%84%E5%BB%B6%E6%97%B6%E5%92%8C%E8%B7%AF%E7%94%B1%EF%BC%9A"><span class="toc-number">1.1.6.0.3.</span> <span class="toc-text">Internet的延时和路由：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E4%B8%A2%E5%A4%B1%EF%BC%9A"><span class="toc-number">1.1.6.0.4.</span> <span class="toc-text">分组丢失：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%90%9E%E5%90%90%E9%87%8F%EF%BC%9A"><span class="toc-number">1.1.6.0.5.</span> <span class="toc-text">吞吐量：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-7%E5%8D%8F%E8%AE%AE%E5%B1%82%E6%AC%A1%E5%8F%8A%E6%9C%8D%E5%8A%A1%E6%A8%A1%E5%9E%8B"><span class="toc-number">1.1.7.</span> <span class="toc-text">1.7协议层次及服务模型</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8D%8F%E8%AE%AE%E5%B1%82%E6%AC%A1%EF%BC%9A"><span class="toc-number">1.1.7.0.1.</span> <span class="toc-text">协议层次：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E7%B1%BB%E5%9E%8B%EF%BC%9A"><span class="toc-number">1.1.7.0.2.</span> <span class="toc-text">服务类型：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%8D%95%E5%85%83%EF%BC%88DU%EF%BC%89%EF%BC%9A"><span class="toc-number">1.1.7.0.3.</span> <span class="toc-text">数据单元（DU）：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%86%E5%B1%82%E5%A4%84%E7%90%86%E7%9A%84%E5%A5%BD%E5%A4%84%EF%BC%9A"><span class="toc-number">1.1.7.0.4.</span> <span class="toc-text">分层处理的好处：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BA%92%E8%81%94%E7%BD%91%E5%8D%8F%E8%AE%AE%E6%A0%88%EF%BC%9A"><span class="toc-number">1.1.7.0.5.</span> <span class="toc-text">互联网协议栈：</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E5%B1%82%EF%BC%9A"><span class="toc-number">1.1.7.0.5.1.</span> <span class="toc-text">应用层：</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E4%BC%A0%E8%BE%93%E5%B1%82%EF%BC%9A"><span class="toc-number">1.1.7.0.5.2.</span> <span class="toc-text">传输层：</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%B1%82%EF%BC%9A"><span class="toc-number">1.1.7.0.5.3.</span> <span class="toc-text">网络层：</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E9%93%BE%E8%B7%AF%E5%B1%82%EF%BC%9A"><span class="toc-number">1.1.7.0.5.4.</span> <span class="toc-text">链路层：</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E7%89%A9%E7%90%86%E5%B1%82%EF%BC%9A"><span class="toc-number">1.1.7.0.5.5.</span> <span class="toc-text">物理层：</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#ISO-OSI%E5%8F%82%E8%80%83%E6%A8%A1%E5%9E%8B%EF%BC%88%E4%B8%83%E5%B1%82%E6%A8%A1%E5%9E%8B%EF%BC%89%EF%BC%9A"><span class="toc-number">1.1.7.0.6.</span> <span class="toc-text">ISO&#x2F;OSI参考模型（七层模型）：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B0%81%E8%A3%85%E5%92%8C%E8%A7%A3%E5%B0%81%E8%A3%85%EF%BC%9A"><span class="toc-number">1.1.7.0.7.</span> <span class="toc-text">封装和解封装：</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82"><span class="toc-number">1.2.</span> <span class="toc-text">第二章 应用层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1%E5%BA%94%E7%94%A8%E5%B1%82%E5%8D%8F%E8%AE%AE%E5%8E%9F%E7%90%86"><span class="toc-number">1.2.1.</span> <span class="toc-text">2.1应用层协议原理</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%BA%94%E7%94%A8%E7%9A%84%E4%BD%93%E7%B3%BB%E6%9E%B6%E6%9E%84"><span class="toc-number">1.2.1.0.1.</span> <span class="toc-text">网络应用的体系架构:</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E9%80%9A%E4%BF%A1"><span class="toc-number">1.2.1.0.2.</span> <span class="toc-text">进程通信:</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2Web-and-HTTP"><span class="toc-number">1.2.2.</span> <span class="toc-text">2.2Web and HTTP</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Web%EF%BC%9A"><span class="toc-number">1.2.2.0.1.</span> <span class="toc-text">Web：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#HTTP%EF%BC%9A"><span class="toc-number">1.2.2.0.2.</span> <span class="toc-text">HTTP：</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E9%9D%9E%E6%8C%81%E4%B9%85HTTP%EF%BC%9A"><span class="toc-number">1.2.2.0.2.1.</span> <span class="toc-text">非持久HTTP：</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%8C%81%E4%B9%85HTTP%EF%BC%9A"><span class="toc-number">1.2.2.0.2.2.</span> <span class="toc-text">持久HTTP：</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#HTTP%E8%AF%B7%E6%B1%82%E6%8A%A5%E6%96%87%EF%BC%9A"><span class="toc-number">1.2.2.0.2.3.</span> <span class="toc-text">HTTP请求报文：</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%8F%90%E4%BA%A4%E8%A1%A8%E5%8D%95%E8%BE%93%E5%85%A5%EF%BC%9A"><span class="toc-number">1.2.2.0.2.4.</span> <span class="toc-text">提交表单输入：</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#HTTP%E5%93%8D%E5%BA%94%E6%8A%A5%E6%96%87%EF%BC%9A"><span class="toc-number">1.2.2.0.2.5.</span> <span class="toc-text">HTTP响应报文：</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E7%94%A8%E6%88%B7-%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%8A%B6%E6%80%81%EF%BC%9Acookie"><span class="toc-number">1.2.2.0.2.6.</span> <span class="toc-text">用户-服务器状态：cookie</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#Web%E7%BC%93%E5%AD%98%EF%BC%88%E4%BB%A3%E7%90%86%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%89%EF%BC%9A"><span class="toc-number">1.2.2.0.2.7.</span> <span class="toc-text">Web缓存（代理服务器）：</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6GET%E6%96%B9%E6%B3%95%EF%BC%9A"><span class="toc-number">1.2.2.0.2.8.</span> <span class="toc-text">条件GET方法：</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3FTP"><span class="toc-number">1.2.3.</span> <span class="toc-text">2.3FTP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4Email%EF%BC%8CSMTP%EF%BC%8CPOP3%EF%BC%8CIMAP"><span class="toc-number">1.2.4.</span> <span class="toc-text">2.4Email，SMTP，POP3，IMAP</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6"><span class="toc-number">1.2.4.0.1.</span> <span class="toc-text">电子邮件</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E4%BB%A3%E7%90%86"><span class="toc-number">1.2.4.0.1.1.</span> <span class="toc-text">用户代理</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E9%82%AE%E4%BB%B6%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">1.2.4.0.1.2.</span> <span class="toc-text">邮件服务器</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#SMTP%E5%8D%8F%E8%AE%AE"><span class="toc-number">1.2.4.0.1.3.</span> <span class="toc-text">SMTP协议</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E9%82%AE%E4%BB%B6%E8%AE%BF%E9%97%AE%E5%8D%8F%E8%AE%AE%EF%BC%9A"><span class="toc-number">1.2.4.0.1.4.</span> <span class="toc-text">邮件访问协议：</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5DNS"><span class="toc-number">1.2.5.</span> <span class="toc-text">2.5DNS</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#DNS%E7%9A%84%E5%BF%85%E8%A6%81%E6%80%A7%EF%BC%9A"><span class="toc-number">1.2.5.0.1.</span> <span class="toc-text">DNS的必要性：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#DNS%E7%9A%84%E6%80%BB%E4%BD%93%E6%80%9D%E8%B7%AF%E5%92%8C%E7%9B%AE%E6%A0%87"><span class="toc-number">1.2.5.0.2.</span> <span class="toc-text">DNS的总体思路和目标</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#DNS%E9%9C%80%E8%A6%81%E8%A7%A3%E5%86%B3%E7%9A%84%E9%97%AE%E9%A2%98%EF%BC%9A"><span class="toc-number">1.2.5.0.3.</span> <span class="toc-text">DNS需要解决的问题：</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#1-%E5%A6%82%E4%BD%95%E5%91%BD%E5%90%8D%E8%AE%BE%E5%A4%87"><span class="toc-number">1.2.5.0.3.1.</span> <span class="toc-text">1.如何命名设备</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#2-%E5%A6%82%E4%BD%95%E5%AE%8C%E6%88%90%E5%90%8D%E5%AD%97%E5%88%B0IP%E7%9A%84%E8%BD%AC%E6%8D%A2"><span class="toc-number">1.2.5.0.3.2.</span> <span class="toc-text">2.如何完成名字到IP的转换</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#3-%E5%A6%82%E4%BD%95%E7%BB%B4%E6%8A%A4"><span class="toc-number">1.2.5.0.3.3.</span> <span class="toc-text">3.如何维护</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6P2P%E5%BA%94%E7%94%A8"><span class="toc-number">1.2.6.</span> <span class="toc-text">2.6P2P应用</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#C-S-VS-P2P"><span class="toc-number">1.2.6.0.1.</span> <span class="toc-text">C&#x2F;S VS P2P</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E5%88%86%E5%8F%91%EF%BC%9A"><span class="toc-number">1.2.6.0.1.1.</span> <span class="toc-text">文件分发：</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-7CDN"><span class="toc-number">1.2.7.</span> <span class="toc-text">2.7CDN</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A4%9A%E5%AA%92%E4%BD%93%E6%B5%81%E5%8C%96%E6%9C%8D%E5%8A%A1%EF%BC%9A"><span class="toc-number">1.2.7.0.1.</span> <span class="toc-text">多媒体流化服务：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#CDN%EF%BC%9A"><span class="toc-number">1.2.7.0.2.</span> <span class="toc-text">CDN：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-8TCP%E5%A5%97%E6%8E%A5%E5%AD%97%EF%BC%88Socket%EF%BC%89%E7%BC%96%E7%A8%8B"><span class="toc-number">1.2.8.</span> <span class="toc-text">2.8TCP套接字（Socket）编程</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BB%93%E6%9E%84%E4%BD%93%EF%BC%9A"><span class="toc-number">1.2.8.0.1.</span> <span class="toc-text">结构体：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-9UDP%E5%A5%97%E6%8E%A5%E5%AD%97%E7%BC%96%E7%A8%8B"><span class="toc-number">1.2.9.</span> <span class="toc-text">2.9UDP套接字编程</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E7%AB%A0-%E4%BC%A0%E8%BE%93%E5%B1%82"><span class="toc-number">1.3.</span> <span class="toc-text">第三章 传输层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1%E6%A6%82%E8%BF%B0%E5%92%8C%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8D%8F%E8%AE%AE"><span class="toc-number">1.3.1.</span> <span class="toc-text">3.1概述和传输层协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8%E5%92%8C%E8%A7%A3%E5%A4%8D%E7%94%A8"><span class="toc-number">1.3.2.</span> <span class="toc-text">3.2多路复用和解复用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3%E6%97%A0%E8%BF%9E%E6%8E%A5%E4%BC%A0%E8%BE%93%EF%BC%9AUDP"><span class="toc-number">1.3.3.</span> <span class="toc-text">3.3无连接传输：UDP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4%E5%8F%AF%E9%9D%A0%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93%EF%BC%88rdt%EF%BC%89%E7%9A%84%E5%8E%9F%E7%90%86"><span class="toc-number">1.3.4.</span> <span class="toc-text">3.4可靠数据传输（rdt）的原理</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%97%AE%E9%A2%98%E6%8F%8F%E8%BF%B0%EF%BC%9A"><span class="toc-number">1.3.4.0.1.</span> <span class="toc-text">问题描述：</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#Rdt1-0%EF%BC%9A"><span class="toc-number">1.3.4.0.1.1.</span> <span class="toc-text">Rdt1.0：</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#Rdt2-0"><span class="toc-number">1.3.4.0.1.2.</span> <span class="toc-text">Rdt2.0:</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#Rdt2-1%EF%BC%9A"><span class="toc-number">1.3.4.0.1.3.</span> <span class="toc-text">Rdt2.1：</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#Rdt2-2%EF%BC%9A"><span class="toc-number">1.3.4.0.1.4.</span> <span class="toc-text">Rdt2.2：</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#Rdt3-0%EF%BC%9A"><span class="toc-number">1.3.4.0.1.5.</span> <span class="toc-text">Rdt3.0：</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5%E9%9D%A2%E5%90%91%E8%BF%9E%E6%8E%A5%E7%9A%84%E4%BC%A0%E8%BE%93TCP"><span class="toc-number">1.3.5.</span> <span class="toc-text">3.5面向连接的传输TCP</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#TCP%E5%8F%91%E9%80%81%E6%96%B9%E4%BA%8B%E4%BB%B6%EF%BC%9A"><span class="toc-number">1.3.5.0.1.</span> <span class="toc-text">TCP发送方事件：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-6%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6%E5%8E%9F%E7%90%86"><span class="toc-number">1.3.6.</span> <span class="toc-text">3.6拥塞控制原理</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%8B%A5%E5%A1%9E%E7%9A%84%E5%8E%9F%E5%9B%A0-%E4%BB%A3%E4%BB%B7%EF%BC%9A"><span class="toc-number">1.3.6.0.1.</span> <span class="toc-text">拥塞的原因&#x2F;代价：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6%E6%96%B9%E6%B3%95%EF%BC%9A"><span class="toc-number">1.3.6.0.2.</span> <span class="toc-text">拥塞控制方法：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-7TCP%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6"><span class="toc-number">1.3.7.</span> <span class="toc-text">3.7TCP拥塞控制</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%9B%9B%E7%AB%A0-%E7%BD%91%E7%BB%9C%E5%B1%82%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2"><span class="toc-number">1.4.</span> <span class="toc-text">第四章 网络层：数据平面</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1%E5%AF%BC%E8%AE%BA"><span class="toc-number">1.4.1.</span> <span class="toc-text">4.1导论</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%B1%82%E6%8F%90%E4%BE%9B%E7%9A%84%E6%9C%8D%E5%8A%A1"><span class="toc-number">1.4.1.0.1.</span> <span class="toc-text">网络层提供的服务:</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%B1%82%E7%9A%84%E5%85%B3%E9%94%AE%E5%8A%9F%E8%83%BD"><span class="toc-number">1.4.1.0.2.</span> <span class="toc-text">网络层的关键功能:</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2%E3%80%81%E6%8E%A7%E5%88%B6%E5%B9%B3%E9%9D%A2%EF%BC%9A"><span class="toc-number">1.4.1.0.3.</span> <span class="toc-text">数据平面、控制平面：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F%EF%BC%9A"><span class="toc-number">1.4.1.0.4.</span> <span class="toc-text">实现方式：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1%E6%A8%A1%E5%9E%8B%EF%BC%9A"><span class="toc-number">1.4.1.0.5.</span> <span class="toc-text">网络服务模型：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%B1%82%E5%92%8C%E4%BC%A0%E8%BE%93%E5%B1%82%E8%BF%9E%E6%8E%A5%E6%9C%8D%E5%8A%A1%E5%8C%BA%E5%88%AB%EF%BC%9A"><span class="toc-number">1.4.1.0.6.</span> <span class="toc-text">网络层和传输层连接服务区别：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2%E8%B7%AF%E7%94%B1%E5%99%A8%E7%BB%84%E6%88%90"><span class="toc-number">1.4.2.</span> <span class="toc-text">4.2路由器组成</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E5%99%A8%E7%BB%93%E6%9E%84%E6%A6%82%E5%86%B5%EF%BC%9A"><span class="toc-number">1.4.2.0.1.</span> <span class="toc-text">路由器结构概况：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BE%93%E5%85%A5%E7%AB%AF%E5%8F%A3%E5%8A%9F%E8%83%BD"><span class="toc-number">1.4.2.0.2.</span> <span class="toc-text">输入端口功能</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BE%93%E5%85%A5%E7%AB%AF%E5%8F%A3%E7%BC%93%E5%AD%98"><span class="toc-number">1.4.2.0.3.</span> <span class="toc-text">输入端口缓存</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BA%A4%E6%8D%A2%E7%BB%93%E6%9E%84"><span class="toc-number">1.4.2.0.4.</span> <span class="toc-text">交换结构</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BE%93%E5%87%BA%E7%AB%AF%E5%8F%A3"><span class="toc-number">1.4.2.0.5.</span> <span class="toc-text">输出端口</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BE%93%E5%87%BA%E7%AB%AF%E5%8F%A3%E6%8E%92%E9%98%9F"><span class="toc-number">1.4.2.0.6.</span> <span class="toc-text">输出端口排队</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%B0%83%E5%BA%A6%E6%9C%BA%E5%88%B6"><span class="toc-number">1.4.2.0.7.</span> <span class="toc-text">调度机制</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%B0%83%E5%BA%A6%E7%AD%96%E7%95%A5%EF%BC%9A"><span class="toc-number">1.4.2.0.8.</span> <span class="toc-text">调度策略：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3IP%E5%8D%8F%E8%AE%AE"><span class="toc-number">1.4.3.</span> <span class="toc-text">4.3IP协议</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#IP%E5%88%86%E7%89%87%E5%92%8C%E9%87%8D%E7%BB%84"><span class="toc-number">1.4.3.0.1.</span> <span class="toc-text">IP分片和重组</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#IP%E7%BC%96%E5%9D%80%EF%BC%9A%E5%BC%95%E8%AE%BA"><span class="toc-number">1.4.3.0.2.</span> <span class="toc-text">IP编址：引论</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AD%90%E7%BD%91"><span class="toc-number">1.4.3.0.3.</span> <span class="toc-text">子网</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%89%B9%E6%AE%8AIP%E5%9C%B0%E5%9D%80"><span class="toc-number">1.4.3.0.4.</span> <span class="toc-text">特殊IP地址</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#IP%E7%BC%96%E5%9D%80%EF%BC%9ACIDR"><span class="toc-number">1.4.3.0.5.</span> <span class="toc-text">IP编址：CIDR</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E8%8E%B7%E5%BE%97%E4%B8%80%E4%B8%AAIP%E5%9C%B0%E5%9D%80"><span class="toc-number">1.4.3.0.6.</span> <span class="toc-text">如何获得一个IP地址</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#IPv6"><span class="toc-number">1.4.3.0.7.</span> <span class="toc-text">IPv6</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4%E9%80%9A%E7%94%A8%E8%BD%AC%E5%8F%91%E5%92%8CSDN"><span class="toc-number">1.4.4.</span> <span class="toc-text">4.4通用转发和SDN</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#SDN%EF%BC%9A%E9%80%BB%E8%BE%91%E4%B8%8A%E9%9B%86%E4%B8%AD%E7%9A%84%E6%8E%A7%E5%88%B6%E5%B9%B3%E9%9D%A2"><span class="toc-number">1.4.4.0.1.</span> <span class="toc-text">SDN：逻辑上集中的控制平面</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%BA%94%E7%AB%A0-%E7%BD%91%E7%BB%9C%E5%B1%82%EF%BC%9A%E6%8E%A7%E5%88%B6%E5%B9%B3%E9%9D%A2"><span class="toc-number">1.5.</span> <span class="toc-text">第五章 网络层：控制平面</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E7%AE%97%E6%B3%95"><span class="toc-number">1.5.1.</span> <span class="toc-text">5.1路由选择算法</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AE"><span class="toc-number">1.5.1.0.1.</span> <span class="toc-text">路由协议</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="toc-number">1.5.1.0.2.</span> <span class="toc-text">路由的概念</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9C%80%E4%BC%98%E5%8C%96%E5%8E%9F%E5%88%99"><span class="toc-number">1.5.1.0.3.</span> <span class="toc-text">最优化原则</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E7%9A%84%E5%8E%9F%E5%88%99"><span class="toc-number">1.5.1.0.4.</span> <span class="toc-text">路由的原则</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E7%AE%97%E6%B3%95%E5%88%86%E7%B1%BB"><span class="toc-number">1.5.1.0.5.</span> <span class="toc-text">路由算法分类</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#LS%E8%B7%AF%E7%94%B1%E7%9A%84%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B%EF%BC%88link-state%EF%BC%89"><span class="toc-number">1.5.1.0.6.</span> <span class="toc-text">LS路由的工作流程（link state）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#LS%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E7%AE%97%E6%B3%95%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-number">1.5.1.0.7.</span> <span class="toc-text">LS路由选择算法的工作原理</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%B7%9D%E7%A6%BB%E7%9F%A2%E9%87%8F%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%80%9D%E6%83%B3%EF%BC%88distance-vector%EF%BC%89"><span class="toc-number">1.5.1.0.8.</span> <span class="toc-text">距离矢量路由选择的基本思想（distance vector）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%B7%9D%E7%A6%BB%E7%9F%A2%E9%87%8F%E7%AE%97%E6%B3%95"><span class="toc-number">1.5.1.0.9.</span> <span class="toc-text">距离矢量算法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#LS%E7%AE%97%E6%B3%95%E5%92%8CDV%E7%AE%97%E6%B3%95%E6%AF%94%E8%BE%83"><span class="toc-number">1.5.1.0.10.</span> <span class="toc-text">LS算法和DV算法比较</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2%E5%9B%A0%E7%89%B9%E7%BD%91%E4%B8%AD%E8%87%AA%E6%B2%BB%E7%B3%BB%E7%BB%9F%E5%86%85%E9%83%A8%E7%9A%84%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E5%8D%8F%E8%AE%AE"><span class="toc-number">1.5.2.</span> <span class="toc-text">5.2因特网中自治系统内部的路由选择协议</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#RIP"><span class="toc-number">1.5.2.0.1.</span> <span class="toc-text">RIP</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#OSPF"><span class="toc-number">1.5.2.0.2.</span> <span class="toc-text">OSPF</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3ISP%E4%B9%8B%E9%97%B4%E7%9A%84%E8%B7%AF%E7%94%B1BGP"><span class="toc-number">1.5.3.</span> <span class="toc-text">5.3ISP之间的路由BGP</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B1%82%E6%AC%A1%E8%B7%AF%E7%94%B1"><span class="toc-number">1.5.3.0.1.</span> <span class="toc-text">层次路由</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#BGP"><span class="toc-number">1.5.3.0.2.</span> <span class="toc-text">BGP</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#BGP%E5%9F%BA%E7%A1%80"><span class="toc-number">1.5.3.0.3.</span> <span class="toc-text">BGP基础</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#BGP%E5%B1%9E%E6%80%A7"><span class="toc-number">1.5.3.0.4.</span> <span class="toc-text">BGP属性</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#BGP%E6%8A%A5%E6%96%87"><span class="toc-number">1.5.3.0.5.</span> <span class="toc-text">BGP报文</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#BGP%E8%B7%AF%E5%BE%84%E9%80%89%E6%8B%A9"><span class="toc-number">1.5.3.0.6.</span> <span class="toc-text">BGP路径选择</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E5%86%85%E9%83%A8%E7%BD%91%E5%85%B3%E5%8D%8F%E8%AE%AE%E4%B8%8E%E5%A4%96%E9%83%A8%E7%BD%91%E5%85%B3%E5%8D%8F%E8%AE%AE%E5%A6%82%E6%AD%A4%E4%B8%8D%E5%90%8C%EF%BC%9F"><span class="toc-number">1.5.3.0.7.</span> <span class="toc-text">为什么内部网关协议与外部网关协议如此不同？</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4SDN%E6%8E%A7%E5%88%B6%E5%B9%B3%E9%9D%A2"><span class="toc-number">1.5.4.</span> <span class="toc-text">5.4SDN控制平面</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%85%AD%E7%AB%A0-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E5%92%8C%E5%B1%80%E5%9F%9F%E7%BD%91"><span class="toc-number">1.6.</span> <span class="toc-text">第六章 数据链路层和局域网</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1%E5%AF%BC%E8%AE%BA"><span class="toc-number">1.6.1.</span> <span class="toc-text">6.1导论</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%AF%E8%AF%AD"><span class="toc-number">1.6.1.1.</span> <span class="toc-text">术语</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8F%90%E4%BE%9B%E7%9A%84%E6%9C%8D%E5%8A%A1"><span class="toc-number">1.6.1.2.</span> <span class="toc-text">提供的服务</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2%E5%B7%AE%E9%94%99%E7%BA%A0%E6%AD%A3"><span class="toc-number">1.6.2.</span> <span class="toc-text">6.2差错纠正</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%94%99%E8%AF%AF%E6%A3%80%E6%B5%8B"><span class="toc-number">1.6.2.1.</span> <span class="toc-text">错误检测</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A5%87%E5%81%B6%E6%A0%A1%E9%AA%8C"><span class="toc-number">1.6.2.2.</span> <span class="toc-text">奇偶校验</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CRC%EF%BC%88%E5%BE%AA%E7%8E%AF%E5%86%97%E4%BD%99%E6%A0%A1%E9%AA%8C%E7%A0%81%EF%BC%89"><span class="toc-number">1.6.2.3.</span> <span class="toc-text">CRC（循环冗余校验码）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3%E5%A4%9A%E7%82%B9%E8%AE%BF%E9%97%AE%E5%8D%8F%E8%AE%AE"><span class="toc-number">1.6.3.</span> <span class="toc-text">6.3多点访问协议</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#MAC%EF%BC%9A"><span class="toc-number">1.6.3.1.</span> <span class="toc-text">MAC：</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E4%BF%A1%E9%81%93%E5%88%92%E5%88%86%EF%BC%9A%EF%BC%88%E5%9B%BA%E5%AE%9A%E5%88%92%E5%88%86%EF%BC%89"><span class="toc-number">1.6.3.1.0.1.</span> <span class="toc-text">信道划分：（固定划分）</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E9%9A%8F%E6%9C%BA%E8%AE%BF%E9%97%AE%EF%BC%9A"><span class="toc-number">1.6.3.1.0.2.</span> <span class="toc-text">随机访问：</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E4%BE%9D%E6%AC%A1%E8%BD%AE%E6%B5%81%EF%BC%9A"><span class="toc-number">1.6.3.1.0.3.</span> <span class="toc-text">依次轮流：</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4LANS"><span class="toc-number">1.6.4.</span> <span class="toc-text">6.4LANS</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ARP%E5%8D%8F%E8%AE%AE"><span class="toc-number">1.6.4.1.</span> <span class="toc-text">ARP协议</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%A4%E6%8D%A2%E6%9C%BA"><span class="toc-number">1.6.4.2.</span> <span class="toc-text">交换机</span></a></li></ol></li></ol></li></ol></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2023 - 2024 By Cj</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><div class="js-pjax"></div><script defer src="https://npm.elemecdn.com/jquery@latest/dist/jquery.min.js"></script><script defer data-pjax src="/js/cat.js"></script><script src="xxxx"></script><script async src="//npm.elemecdn.com/pace-js@1.2.4/pace.min.js"></script><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/fireworks.min.js"></script><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="30" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"]):not([href="/music/"]):not([href="/no-pjax/"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div><!-- hexo injector body_end start --><script data-pjax>
    function butterfly_categories_card_injector_config(){
      var parent_div_git = document.getElementById('recent-posts');
      var item_html = '<style>li.categoryBar-list-item{width:32.3%;}.categoryBar-list{max-height: 190px;overflow:auto;}.categoryBar-list::-webkit-scrollbar{width:0!important}@media screen and (max-width: 650px){.categoryBar-list{max-height: 160px;}}</style><div class="recent-post-item" style="height:auto;width:100%;padding:0px;"><div id="categoryBar"><ul class="categoryBar-list"></ul></div></div>';
      console.log('已挂载butterfly_categories_card')
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
      }
    if( document.getElementById('recent-posts') && (location.pathname ==='/'|| '/' ==='all')){
    butterfly_categories_card_injector_config()
    }
  </script><script data-pjax>
  function butterfly_clock_anzhiyu_injector_config(){
    var parent_div_git = document.getElementsByClassName('sticky_layout')[0];
    var item_html = '<div class="card-widget card-clock"><div class="card-glass"><div class="card-background"><div class="card-content"><div id="hexo_electric_clock"><img class="entered loading" id="card-clock-loading" src="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/loading.gif" style="height: 120px; width: 100%;" data-ll-status="loading"/></div></div></div></div></div>';
    console.log('已挂载butterfly_clock_anzhiyu')
    if(parent_div_git) {
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  }
  var elist = 'null'.split(',');
  var cpage = location.pathname;
  var epage = '/';
  var qweather_key = 'b16a1fa0e63c46a4b8f28abfb06ae3fe';
  var gaud_map_key = 'e2b04289e870b005374ee030148d64fd&s=rsv3';
  var baidu_ak_key = 'undefined';
  var flag = 0;
  var clock_rectangle = '113.34532,23.15624';
  var clock_default_rectangle_enable = 'false';

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_clock_anzhiyu_injector_config();
  }
  else if (epage === cpage){
    butterfly_clock_anzhiyu_injector_config();
  }
  </script><script src="https://widget.qweather.net/simple/static/js/he-simple-common.js?v=2.0"></script><script data-pjax src="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/clock.min.js"></script><script data-pjax>
  function butterfly_footer_beautify_injector_config(){
    var parent_div_git = document.getElementById('footer-wrap');
    var item_html = '<div id="workboard"></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" data-title="博客框架为Hexo_v6.2.0" title=""><img src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&amp;logo=hexo" alt=""/></a><a class="github-badge" target="_blank" href="https://butterfly.js.org/" style="margin-inline:5px" data-title="主题版本Butterfly_v4.3.1" title=""><img src="https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&amp;logo=bitdefender" alt=""/></a><a class="github-badge" target="_blank" href="https://vercel.com/" style="margin-inline:5px" data-title="本站采用多线部署，主线路托管于Vercel" title=""><img src="https://img.shields.io/badge/Hosted-Vercel-brightgreen?style=flat&amp;logo=Vercel" alt=""/></a><a class="github-badge" target="_blank" href="https://dashboard.4everland.org/" style="margin-inline:5px" data-title="本站采用多线部署，备用线路托管于4EVERLAND" title=""><img src="https://img.shields.io/badge/Hosted-4EVERLAND-22DDDD?style=flat&amp;logo=IPFS" alt=""/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" data-title="本站项目由Github托管" title=""><img src="https://img.shields.io/badge/Source-Github-d021d6?style=flat&amp;logo=GitHub" alt=""/></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px" data-title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可" title=""><img src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&amp;logo=Claris" alt=""/></a></p>';
    console.log('已挂载butterfly_footer_beautify')
    parent_div_git.insertAdjacentHTML("beforeend",item_html)
    }
  var elist = 'null'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_footer_beautify_injector_config();
  }
  else if (epage === cpage){
    butterfly_footer_beautify_injector_config();
  }
  </script><script async src="https://npm.elemecdn.com/hexo-butterfly-footer-beautify@1.0.0/lib/runtime.js"></script><script data-pjax>
  function butterfly_swiper_injector_config(){
    var parent_div_git = document.getElementById('recent-posts');
    var item_html = '<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms;"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;2024/02/29/网安/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src="/img/default_cover_2.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-02-29</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;2024/02/29/网安/&quot;);" href="javascript:void(0);" alt="">网安</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;2024/02/29/网安/&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;2023/04/25/vue3/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src="/img/default_cover_2.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-04-25</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;2023/04/25/vue3/&quot;);" href="javascript:void(0);" alt="">VUE3</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;2023/04/25/vue3/&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;2023/04/23/人工智能算法/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src="/img/default_cover_3.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-04-23</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;2023/04/23/人工智能算法/&quot;);" href="javascript:void(0);" alt="">算法学习</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;2023/04/23/人工智能算法/&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;2024/02/24/Java IO/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src="/img/default_cover_2.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-02-24</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;2024/02/24/Java IO/&quot;);" href="javascript:void(0);" alt="">Java IO</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;2024/02/24/Java IO/&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;2024/02/21/Java反射/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src="/img/default_cover_1.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-02-21</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;2024/02/21/Java反射/&quot;);" href="javascript:void(0);" alt="">Java反射</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;2024/02/21/Java反射/&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;2024/02/19/Java多线程/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src="/img/default_cover_6.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2024-02-19</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;2024/02/19/Java多线程/&quot;);" href="javascript:void(0);" alt="">Java多线程</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;2024/02/19/Java多线程/&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;2023/06/07/操作系统/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src="/img/default_cover_5.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-06-07</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;2023/06/07/操作系统/&quot;);" href="javascript:void(0);" alt="">操作系统学习</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;2023/06/07/操作系统/&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;2023/04/12/计网/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src="/img/default_cover_4.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2023-04-12</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;2023/04/12/计网/&quot;);" href="javascript:void(0);" alt="">计网学习</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;2023/04/12/计网/&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>';
    console.log('已挂载butterfly_swiper')
    parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  var elist = 'undefined'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_swiper_injector_config();
  }
  else if (epage === cpage){
    butterfly_swiper_injector_config();
  }
  </script><script defer src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js"></script><script defer data-pjax src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js"></script><!-- hexo injector body_end end --><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"model":{"jsonPath":"/live2dw/assets/koharu.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body></html>